/*! For license information please see WcBetterShippingCalculatorForBrazilCustomProductPostcode.COMPILED.js.LICENSE.txt */
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){var e,n,r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(t,r,c,a){var i=r&&r.prototype instanceof d?r:d,l=Object.create(i.prototype);return o(l,"_invoke",function(t,o,r){var c,a,i,d=0,l=r||[],u=!1,p={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,o){return c=t,a=0,i=e,p.n=o,s}};function y(t,o){for(a=t,i=o,n=0;!u&&d&&!r&&n<l.length;n++){var r,c=l[n],y=p.p,b=c[2];t>3?(r=b===o)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=e):c[0]<=y&&((r=t<2&&y<c[1])?(a=0,p.v=o,p.n=c[1]):y<b&&(r=t<3||c[0]>o||o>b)&&(c[4]=t,c[5]=o,p.n=b,a=0))}if(r||t>1)return s;throw u=!0,o}return function(r,l,b){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&y(l,b),a=l,i=b;(n=a<2?e:i)||!u;){c||(a?a<3?(a>1&&(p.n=-1),y(a,i)):p.n=i:p.v=i);try{if(d=2,c){if(a||(r="next"),n=c[r]){if(!(n=n.call(c,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,a<2&&(a=0)}else 1===a&&(n=c.return)&&n.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),a=1);c=e}else if((n=(u=p.n<0)?i:t.call(o,p))!==s)break}catch(t){c=e,a=1,i=t}finally{d=1}}return{value:n,done:u}}}(t,c,a),!0),l}var s={};function d(){}function l(){}function u(){}n=Object.getPrototypeOf;var p=[][c]?n(n([][c]())):(o(n={},c,function(){return this}),n),y=u.prototype=d.prototype=Object.create(p);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,o(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e}return l.prototype=u,o(y,"constructor",u),o(u,"constructor",l),l.displayName="GeneratorFunction",o(u,a,"GeneratorFunction"),o(y),o(y,a,"Generator"),o(y,c,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:b}})()}function o(e,t,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?c?c(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach(function(t){c(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function c(t,o,n){return(o=function(t){var o=function(t){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(o)?o:o+""}(o))in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}function a(e,t,o,n,r,c,a){try{var i=e[c](a),s=i.value}catch(e){return void o(e)}i.done?t(s):Promise.resolve(s).then(n,r)}document.addEventListener("DOMContentLoaded",function(){var e,o,n,c,i=window.WooBetterData||{},s=!1,d='h1[class*="title"]',l="",u="",p="";function y(){var e=document.querySelector(".woo-better-button-current-style"),t=document.querySelector(".woo-better-input-current-style");e.disabled=!1,t.disabled=!1,e.textContent=u;var o=document.querySelector(".woo-better-current-postcode-block");o&&(o.style.display="flex"),t.style.backgroundColor=i.inputStyles.backgroundColor||"#fff",t.style.cursor="",e.style.backgroundColor=i.buttonStyles.backgroundColor||"#0073aa",e.style.cursor=""}function b(e,t,o){var n=document.createElement("img");n.src=i.display_icon[t],n.alt=o,n.classList.add("woo-better-toggle-icon"),n.classList.add(i.iconColor||"black-icon"),e.appendChild(n)}function m(){var e;return e=t().m(function e(o){var n,r,c,a,s,d,m,w,S;return t().w(function(e){for(;;)switch(e.n){case 0:if(!(n=g(o,i.product_id))){e.n=1;break}return setTimeout(function(){var e=document.querySelector(".woo-better-info-block"),t=document.querySelector("#custom-postcode-form");h(n,t,e,o),y()},300),e.a(2);case 1:return(r=v())[o]&&Object.keys(r[o]).length>0&&(c=document.querySelector(".woo-better-info-block"))&&((a=c.querySelector(".woo-better-product-name"))&&(s=a.childNodes[1])&&s.nodeType===Node.TEXT_NODE&&(s.textContent=" Carregando dados do produto..."),(d=c.querySelector(".woo-better-shipping-list"))&&(d.innerHTML="<li>Calculando taxas de envio...</li>"),c.style.display="block"),m=new AbortController,w=setTimeout(function(){return m.abort()},15e3),S="undefined"!=typeof wpApiSettings&&wpApiSettings.root?wpApiSettings.root+"lknwcbettershipping/v1/cep/?postcode=".concat(o):void 0!==i&&""!==i.wooUrl?i.wooUrl+"/wp-json/lknwcbettershipping/v1/cep/?postcode=".concat(o):"/wp-json/lknwcbettershipping/v1/cep/?postcode=".concat(o),e.n=2,fetch(S,{method:"GET",signal:m.signal,headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(clearTimeout(w),!0===e.status){l=o,addressData=e.address||"",stateData=e.state_sigla||"",cityData=e.city||"";var t=i.ajaxurl,n=new FormData;n.append("action","register_product_address"),n.append("product_id",i.product_id),n.append("shipping[address_1]",addressData),n.append("shipping[city]",cityData),n.append("shipping[state]",stateData),n.append("shipping[postcode]",l),n.append("shipping[country]","BR"),fetch(t,{method:"POST",headers:{nonce:p},body:n}).then(function(e){return e.json()}).then(function(e){if(e.success){var t=document.querySelector(".woo-better-info-block"),n=document.querySelector("#custom-postcode-form");f(e.data,n,t,o).then(function(){var e=document.querySelector(".woo-better-button-current-style"),o=document.querySelector(".woo-better-input-current-style");e.disabled=!1,o.disabled=!1,e.textContent=u;var n=document.querySelector(".woo-better-current-postcode-block");n&&(n.style.display="flex"),t.style.display="block",o.style.backgroundColor=i.inputStyles.backgroundColor||"#fff",o.style.cursor="",e.style.backgroundColor=i.buttonStyles.backgroundColor||"#0073aa",e.style.cursor="";var r=t.querySelector(".woo-better-toggle-button");r&&(r.innerHTML="",b(r,"up","Esconder detalhes de entrega"));var c=t.querySelector(".woo-better-content-block");c&&(c.classList.add("expanded"),c.style.display="block")}).catch(function(e){y(),e&&e.includes&&e.includes("CEP")&&alert(e)})}else if(e.data.digital){var r=document.querySelector(".woo-better-info-block"),c=document.querySelector("#custom-postcode-form");c&&(c.style.display="none");var a=r.querySelector(".woo-better-product-name");if(a){var s=a.childNodes[1];s&&s.nodeType===Node.TEXT_NODE&&(s.textContent=" Produto: ".concat(e.data.product_name))}if(r){var d=r.querySelector(".woo-better-current-postcode-text"),p=r.querySelector(".woo-better-shipping-list");d&&(d.innerHTML="<strong>CEP</strong>: ".concat(l)),p&&(p.innerHTML="<li>Produto digital, não há taxas de envio.</li>"),r.style.display="block";var m=r.querySelector(".woo-better-content-block");m&&(m.classList.add("expanded"),m.style.display="block")}y()}else{var h=e.data.message||"Erro ao processar as taxas de envio.";h.toLowerCase().includes("cep")&&alert(h),y()}}).catch(function(e){e.message&&e.message.toLowerCase().includes("cep")&&alert(e.message),y()})}else y(),e.message&&e.message.toLowerCase().includes("cep")&&alert("Houve um erro ao consultar o CEP.")}).catch(function(e){y(),clearTimeout(w),"AbortError"===e.name||e.message&&!e.message.toLowerCase().includes("fetch")&&alert("Erro na consulta do CEP. Tente novamente.")});case 2:return e.a(2)}},e)}),m=function(){var t=this,o=arguments;return new Promise(function(n,r){var c=e.apply(t,o);function i(e){a(c,n,r,i,s,"next",e)}function s(e){a(c,n,r,i,s,"throw",e)}i(void 0)})},m.apply(this,arguments)}function f(e,t,o,n){return new Promise(function(c,a){try{var s=e;if(!s||!Array.isArray(s.shipping_rates)||0===s.shipping_rates.length)return a("Nenhuma taxa de envio foi encontrada.");!function(e,t,o){var n=v();n[e]||(n[e]={}),n[e][t]=r(r({},o),{},{timestamp:Date.now()}),localStorage.setItem("woo_better_postcode_cache",JSON.stringify(n))}(n,i.product_id,s),S(n),t.style.display="none";var d=o.querySelector(".woo-better-content-block").querySelector(".woo-better-shipping-list"),l=o.querySelector(".woo-better-product-name");if(l){var u=l.childNodes[1];u&&u.nodeType===Node.TEXT_NODE&&(u.textContent=" Produto: ".concat(s.product.name))}var p=o.querySelector(".woo-better-product-quantity");if(p){var y=p.childNodes[1];y&&y.nodeType===Node.TEXT_NODE&&(y.textContent=" Quantidade: ".concat(s.product.quantity))}d.innerHTML="",s.shipping_rates.forEach(function(e){var t=document.createElement("li"),o=parseFloat(e.cost).toFixed(s.product.currency_minor_unit).replace(".",",");t.innerHTML="<strong>".concat(s.product.currency_symbol," ").concat(o,"</strong> - ").concat(e.label),d.appendChild(t)}),o.querySelector(".woo-better-current-postcode-text").innerHTML="<strong>CEP</strong>: ".concat(n),c()}catch(e){a(e)}})}function h(e,t,o,n){try{var r=e;t.style.display="none",S(n);var c=document.querySelector(".woo-better-current-postcode-block");c&&(c.style.display="flex");var a=o.querySelector(".woo-better-content-block").querySelector(".woo-better-shipping-list"),s=o.querySelector(".woo-better-product-name");if(s){var d=s.childNodes[1];d&&d.nodeType===Node.TEXT_NODE&&(d.textContent=" Produto: ".concat(r.product.name))}var l=o.querySelector(".woo-better-product-quantity");if(l){var u=l.childNodes[1];u&&u.nodeType===Node.TEXT_NODE&&(u.textContent=" Quantidade: ".concat(r.product.quantity))}a.innerHTML="",r.shipping_rates.forEach(function(e){var t=document.createElement("li"),o=parseFloat(e.cost).toFixed(r.product.currency_minor_unit).replace(".",",");t.innerHTML="<strong>".concat(r.product.currency_symbol," ").concat(o,"</strong> - ").concat(e.label),a.appendChild(t)}),o.querySelector(".woo-better-current-postcode-text").innerHTML="<strong>CEP</strong>: ".concat(n),o.style.display="block";var p=o.querySelector(".woo-better-toggle-button");p&&(p.innerHTML="",b(p,"up","Esconder detalhes de entrega"));var y=o.querySelector(".woo-better-content-block");y&&!y.classList.contains("expanded")?(y.style.height="0",y.style.display="block",y.offsetHeight,y.classList.add("expanded"),y.style.height="".concat(y.scrollHeight,"px"),y.addEventListener("transitionend",function(){y.classList.contains("expanded")&&(y.style.height="auto")},{once:!0})):y&&y.classList.contains("expanded")&&(y.style.height="auto",y.style.display="block")}catch(e){var m=v();m[n]&&m[n][i.product_id]&&(delete m[n][i.product_id],localStorage.setItem("woo_better_postcode_cache",JSON.stringify(m)))}}function v(){var e="woo_better_postcode_cache",t=localStorage.getItem(e);if(t)try{var o=JSON.parse(t),n=!1;return Object.keys(o).forEach(function(e){Object.keys(o[e]).forEach(function(t){Date.now()-o[e][t].timestamp>432e6&&(delete o[e][t],n=!0)}),0===Object.keys(o[e]).length&&(delete o[e],n=!0)}),n&&localStorage.setItem(e,JSON.stringify(o)),o}catch(t){return localStorage.removeItem(e),{}}return{}}function g(e,t){var o=v();return o[e]&&o[e][t]?o[e][t]:null}function w(){var e="woo_better_last_postcode",t=localStorage.getItem(e);if(t)try{var o=JSON.parse(t);if(Date.now()-o.timestamp<432e6)return o.postcode;localStorage.removeItem(e)}catch(t){localStorage.removeItem(e)}return null}function S(e){var t={postcode:e,timestamp:Date.now()};localStorage.setItem("woo_better_last_postcode",JSON.stringify(t))}e=document.createElement("style"),n=function(e){e=e.replace("#","");var t=parseInt(e,16),o=(t>>16)-10,n=(t>>8&255)-10,r=(255&t)-10;return o=Math.max(0,Math.min(255,o)),n=Math.max(0,Math.min(255,n)),r=Math.max(0,Math.min(255,r)),"#".concat((o<<16|n<<8|r).toString(16).padStart(6,"0"))}(o=i.inputStyles.backgroundColor||"#ffffff"),c="\n            .woo-better-info-block {\n                color: ".concat(i.inputStyles.color," !important;\n                border-radius: ").concat(i.inputStyles.borderRadius," !important;\n                padding: 0px !important;\n                margin: 20px 0px !important;\n                font-family: 'Poppins', sans-serif !important;\n                font-size: 14px !important;\n            }\n\n            .woo-better-current-postcode-block {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                padding: 15px;\n                border: 1px solid #ddd;\n                border-radius: 5px;\n                background-color: ").concat(n," !important;\n                min-width: 200px;\n            }\n\n            .woo-better-content-block {\n                margin-top: -3px;\n                padding: 0px 20px;\n                background-color: ").concat(o," !important;\n                border: none;\n                height: 0;\n                overflow: hidden;\n                transition: height 0.3s ease;\n                box-shadow: none;\n            }\n\n            .woo-better-content-block.expanded {\n                height: auto; \n                padding: 10px 20px;\n                border-bottom-right-radius: ").concat(i.inputStyles.borderRadius," !important;\n                border-bottom-left-radius: ").concat(i.inputStyles.borderRadius," !important;\n                border: ").concat(i.inputStyles.borderWidth," ").concat(i.inputStyles.borderStyle," ").concat(i.inputStyles.borderColor," !important;\n                border-top: 0px !important;\n            }\n        "),e.appendChild(document.createTextNode(c)),document.head.appendChild(e),new MutationObserver(function(e,t){e.forEach(function(e){if("childList"===e.type){var o=function(){if("custom"===i.position)d=i.custom_position||'h1[class*="title"]';else{var e=i.position||"top";"middle"===e?d='div[class*="price"], p[class*="price"]':"bottom"===e&&(d='form[class*="cart"]')}return d}(),n=document.querySelector(o),r=document.querySelector(".wc-block-components-shipping-calculator-address"),c=document.querySelector(".woo-better-parent-container");if(n&&!s&&!r){s=!0,c&&c.remove();var a=function(){var e=document.createElement("div");return e.classList.add("woo-better-parent-container"),e}(),l=function(){var e=document.createElement("form");e.id="custom-postcode-form",e.style.marginTop="20px",e.style.padding="0px";var t=w();t&&"yes"===i.enable_search&&(e.style.display="none");var o=document.createElement("div");o.classList.add("woo-better-container-current-style");var n=document.createElement("div");n.classList.add("woo-better-input-button-group-current-style");var r=document.createElement("div");r.classList.add("woo-better-input-wrapper-current-style");var c=document.createElement("input");c.type="text",c.name="woo_better_custom_product_postcode",c.placeholder=i.placeholder||"Digite o CEP",c.classList.add("woo-better-input-current-style"),c.autocomplete="postal-code",t&&(c.value=t);var a=i.inputStyles||{};Object.keys(a).forEach(function(e){c.style[e]=a[e]}),c.addEventListener("input",function(e){var t=e.target.value;if((t=t.replace(/[^\d-]/g,"")).includes("-")){var o,n=t.split("-");n.length>2||n[0].length>5?t=n[0].slice(0,5)+"-"+(null===(o=n[1])||void 0===o?void 0:o.slice(0,3)):n[0].length<5&&(t=n[0])}t.length>5&&!t.includes("-")&&(t=t.slice(0,5)+"-"+t.slice(5)),t.length>9&&(t=t.slice(0,9)),e.target.value=t});var s=document.createElement("img");s.src=i.icon,s.alt="Ícone de entrega",s.classList.add("woo-better-icon-current-style"),s.classList.add(i.iconColor||"black-icon"),r.appendChild(c),r.appendChild(s);var d=document.createElement("button");d.type="submit",d.textContent="CONSULTAR",d.classList.add("woo-better-button-current-style");var l=i.buttonStyles||{};Object.keys(l).forEach(function(e){d.style[e]=l[e]}),n.appendChild(r),n.appendChild(d),o.appendChild(n);var p=document.createElement("a");return p.href="https://buscacepinter.correios.com.br/app/endereco/index.php",p.textContent="Não sei meu CEP",p.classList.add("woo-better-link-current-style"),p.target="_blank",o.appendChild(p),e.appendChild(o),e.addEventListener("submit",function(e){e.preventDefault();var t=c.value.trim();if(/^\d{5}-\d{3}$/.test(t)){d.disabled=!0,c.disabled=!0,g(t,i.product_id);var o=document.querySelector(".woo-better-info-block"),n=v(),r=n[t]&&Object.keys(n[t]).length>0;o&&!r&&(o.style.display="none"),u=d.textContent,d.textContent="";var a=document.createElement("span");a.classList.add("loading-icon"),d.appendChild(a),c.style.backgroundColor="#f0f0f0",c.style.cursor="not-allowed",d.style.backgroundColor="#ccc",d.style.cursor="not-allowed",function(e){m.apply(this,arguments)}(t)}else alert("Por favor, insira um CEP válido no formato XXXXX-XXX.")}),e}(),y={product:{name:"*******",quantity:i.quantity,currency_symbol:"R$",currency_minor_unit:2},shipping_rates:[{id:"**********",label:"***********",cost:12.34}],postcode:"123456-789"},f=function(e,t,o,n){var r=document.createElement("div");r.classList.add("woo-better-info-block");var c=w();if(c&&"yes"===i.enable_search){var a=v(),s=a[c]&&Object.keys(a[c]).length>0;r.style.display=s?"block":"none"}else r.style.display="none";var d=document.createElement("div");d.classList.add("woo-better-content-block"),d.style.display="none";var l=document.createElement("p"),u=document.createElement("img");u.src=i.details_icon.product,u.alt="Produto",u.classList.add("woo-better-icon"),u.classList.add(i.iconColor||"black-icon"),l.appendChild(u);var p=document.createTextNode(" Produto");l.appendChild(p),l.classList.add("woo-better-product-name");var y=document.createElement("p"),m=document.createElement("img");m.src=i.details_icon.quantity,m.alt="Quantidade",m.classList.add("woo-better-icon"),m.classList.add(i.iconColor||"black-icon"),y.appendChild(m);var f=document.createTextNode(" Quantidade: ".concat(e.quantity));y.appendChild(f),y.classList.add("woo-better-product-quantity");var h=document.createElement("div");h.classList.add("woo-better-shipping-methods");var g=document.createElement("p"),S=document.createElement("img");S.src=i.icon,S.alt="Entrega",S.classList.add("woo-better-icon"),S.classList.add(i.iconColor||"black-icon"),g.appendChild(S);var E=document.createTextNode(" Métodos de Entrega:");g.appendChild(E),h.appendChild(g);var _=document.createElement("ul");_.classList.add("woo-better-shipping-list"),t.forEach(function(t){var o=document.createElement("li");o.innerHTML="<strong>".concat(e.currency_symbol," ").concat(parseFloat(t.cost).toFixed(e.currency_minor_unit).replace(".",","),"</strong> - ").concat(t.label),_.appendChild(o)}),h.appendChild(_),d.appendChild(l),d.appendChild(y),d.appendChild(h);var C=function(e,t){var o=document.createElement("div");o.classList.add("woo-better-current-postcode-block");var n=document.createElement("div");n.classList.add("woo-better-toggle-postcode-wrapper");var r=document.createElement("button");r.type="button",b(r,"up","Esconder detalhes de entrega"),r.classList.add("woo-better-toggle-button");var c=document.createElement("span");c.innerHTML="<strong>CEP</strong>: ".concat(e),c.classList.add("woo-better-current-postcode-text"),r.addEventListener("click",function(){var e=document.querySelector(".woo-better-content-block");e&&(e.classList.contains("expanded")?(e.style.height="".concat(e.scrollHeight,"px"),requestAnimationFrame(function(){e.style.height="0"}),e.classList.remove("expanded"),r.innerHTML="",b(r,"down","Exibir detalhes de entrega")):(e.style.height="".concat(e.scrollHeight,"px"),e.classList.add("expanded"),r.innerHTML="",b(r,"up","Esconder detalhes de entrega"),e.addEventListener("transitionend",function(){e.classList.contains("expanded")&&(e.style.height="".concat(e.scrollHeight,"px"))},{once:!0})))}),n.appendChild(r),n.appendChild(c);var a=document.createElement("button");return a.type="button",a.textContent="Alterar",a.classList.add("woo-better-change-postcode-button"),a.addEventListener("click",function(){var e=document.querySelector(".woo-better-info-block");e&&(e.style.display="none"),t.style.display="block"}),o.appendChild(n),o.appendChild(a),o}(o,n);return r.appendChild(C),r.appendChild(d),r}(y.product,y.shipping_rates,y.postcode,l);a.appendChild(l),a.appendChild(f),n.insertAdjacentElement("afterend",a),h=function(){var e=w();if(e){var o=document.querySelector(".woo-better-input-current-style");if(o){o.value=e;var n=g(e,i.product_id),r=v(),c=r[e]&&Object.keys(r[e]).length>0;if(n&&i.enable_search&&"yes"===i.enable_search){var a=document.querySelector(".woo-better-button-current-style");a&&a.click()}else if(!n&&c&&i.enable_search&&"yes"===i.enable_search){var s=document.querySelector(".woo-better-info-block");if(s){s.style.display="block";var d=s.querySelector(".woo-better-product-name");if(d){var l=d.childNodes[1];l&&l.nodeType===Node.TEXT_NODE&&(l.textContent=" Preparando dados do produto...")}}var u=document.querySelector(".woo-better-button-current-style");u&&u.click()}else if(!n&&!c&&i.enable_search&&"yes"===i.enable_search){var p=document.querySelector(".woo-better-button-current-style");p&&p.click()}}}t.disconnect()},(S=new FormData).append("action","wc_better_calc_get_nonce"),S.append("action_nonce","woo_better_register_product_address"),fetch(i.ajaxurl,{method:"POST",body:S}).then(function(e){return e.json()}).then(function(e){e.success&&e.data&&e.data.nonce&&(p=e.data.nonce),h()}).catch(function(){h()})}}var h,S})}).observe(document.body,{childList:!0,subtree:!0})})})();