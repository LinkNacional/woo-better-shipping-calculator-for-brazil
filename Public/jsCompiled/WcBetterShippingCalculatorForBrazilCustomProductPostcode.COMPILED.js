/*! For license information please see WcBetterShippingCalculatorForBrazilCustomProductPostcode.COMPILED.js.LICENSE.txt */
(()=>{function e(){var o,n,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function i(e,r,a,c){var i=r&&r.prototype instanceof d?r:d,l=Object.create(i.prototype);return t(l,"_invoke",function(e,t,r){var a,c,i,d=0,l=r||[],u=!1,p={p:0,n:0,v:o,a:b,f:b.bind(o,4),d:function(e,t){return a=e,c=0,i=o,p.n=t,s}};function b(e,t){for(c=e,i=t,n=0;!u&&d&&!r&&n<l.length;n++){var r,a=l[n],b=p.p,m=a[2];e>3?(r=m===t)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=o):a[0]<=b&&((r=e<2&&b<a[1])?(c=0,p.v=t,p.n=a[1]):b<m&&(r=e<3||a[0]>t||t>m)&&(a[4]=e,a[5]=t,p.n=m,c=0))}if(r||e>1)return s;throw u=!0,t}return function(r,l,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&b(l,m),c=l,i=m;(n=c<2?o:i)||!u;){a||(c?c<3?(c>1&&(p.n=-1),b(c,i)):p.n=i:p.v=i);try{if(d=2,a){if(c||(r="next"),n=a[r]){if(!(n=n.call(a,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),c=1);a=o}else if((n=(u=p.n<0)?i:e.call(t,p))!==s)break}catch(e){a=o,c=1,i=e}finally{d=1}}return{value:n,done:u}}}(e,a,c),!0),l}var s={};function d(){}function l(){}function u(){}n=Object.getPrototypeOf;var p=[][a]?n(n([][a]())):(t(n={},a,function(){return this}),n),b=u.prototype=d.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,t(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e}return l.prototype=u,t(b,"constructor",u),t(u,"constructor",l),l.displayName="GeneratorFunction",t(u,c,"GeneratorFunction"),t(b),t(b,c,"Generator"),t(b,a,function(){return this}),t(b,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m}})()}function t(e,o,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,o,n,r){function c(o,n){t(e,o,function(e){return this._invoke(o,n,e)})}o?a?a(e,o,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[o]=n:(c("next",0),c("throw",1),c("return",2))},t(e,o,n,r)}function o(e,t,o,n,r,a,c){try{var i=e[a](c),s=i.value}catch(e){return void o(e)}i.done?t(s):Promise.resolve(s).then(n,r)}document.addEventListener("DOMContentLoaded",function(){var t=window.WooBetterData||{},n=!1,r='h1[class*="title"]',a="",c="",i="";function s(){var e=document.querySelector(".woo-better-button-current-style"),o=document.querySelector(".woo-better-input-current-style");e.disabled=!1,o.disabled=!1,e.textContent=c;var n=document.querySelector(".woo-better-current-postcode-block");n&&(n.style.display="flex"),o.style.backgroundColor=t.inputStyles.backgroundColor||"#fff",o.style.cursor="",e.style.backgroundColor=t.buttonStyles.backgroundColor||"#0073aa",e.style.cursor="";var r=document.querySelector(".woo-better-update-icon"),a=document.querySelector(".woo-better-update-icon-container");r&&r.classList.contains("spinning")&&setTimeout(function(){r.classList.remove("spinning"),a&&a.classList.remove("spinning-container")},800)}function d(e,o,n){var r=document.createElement("img");r.src=t.display_icon[o],r.alt=n,r.classList.add("woo-better-toggle-icon"),r.classList.add(t.iconColor||"black-icon"),e.appendChild(r)}function l(){var n;return n=e().m(function o(n){var r,l,y,h,f,g,v,w,_;return e().w(function(e){for(;;)switch(e.n){case 0:if(!(r=m(n,t.product_id))){e.n=1;break}return setTimeout(function(){var e=document.querySelector(".woo-better-info-block"),t=document.querySelector("#custom-postcode-form");p(r,t,e,n),s()},300),e.a(2);case 1:return(l=b())[n]&&Object.keys(l[n]).length>0&&(y=document.querySelector(".woo-better-info-block"))&&((h=y.querySelector(".woo-better-product-name"))&&(f=h.childNodes[1])&&f.nodeType===Node.TEXT_NODE&&(f.textContent=" Carregando dados do produto..."),(g=y.querySelector(".woo-better-shipping-list"))&&(g.innerHTML="<li>Calculando taxas de envio...</li>"),y.style.display="block"),v=new AbortController,w=setTimeout(function(){return v.abort()},15e3),_="undefined"!=typeof wpApiSettings&&wpApiSettings.root?wpApiSettings.root+"lknwcbettershipping/v1/cep/?postcode=".concat(n):void 0!==t&&""!==t.wooUrl?t.wooUrl+"/wp-json/lknwcbettershipping/v1/cep/?postcode=".concat(n):"/wp-json/lknwcbettershipping/v1/cep/?postcode=".concat(n),e.n=2,fetch(_,{method:"GET",signal:v.signal,headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(clearTimeout(w),!0===e.status){a=n,addressData=e.address||"",stateData=e.state_sigla||"",cityData=e.city||"";var o=t.ajaxurl,r=new FormData;r.append("action","register_product_address"),r.append("product_id",t.product_id),r.append("shipping[address_1]",addressData),r.append("shipping[city]",cityData),r.append("shipping[state]",stateData),r.append("shipping[postcode]",a),r.append("shipping[country]","BR"),fetch(o,{method:"POST",headers:{nonce:i},body:r}).then(function(e){return e.json()}).then(function(e){if(e.success){var o=document.querySelector(".woo-better-info-block"),r=document.querySelector("#custom-postcode-form");u(e.data,r,o,n).then(function(){var e=document.querySelector(".woo-better-button-current-style"),n=document.querySelector(".woo-better-input-current-style");e.disabled=!1,n.disabled=!1,e.textContent=c;var r=document.querySelector(".woo-better-current-postcode-block");r&&(r.style.display="flex"),o.style.display="block",n.style.backgroundColor=t.inputStyles.backgroundColor||"#fff",n.style.cursor="",e.style.backgroundColor=t.buttonStyles.backgroundColor||"#0073aa",e.style.cursor="";var a=o.querySelector(".woo-better-toggle-button");a&&(a.innerHTML="",d(a,"up","Esconder detalhes de entrega"));var i=o.querySelector(".woo-better-content-block");i&&(i.classList.add("expanded"),i.style.display="block")}).catch(function(e){s(),e&&e.includes&&e.includes("CEP")&&alert(e)})}else if(e.data.digital){var i=document.querySelector(".woo-better-info-block"),l=document.querySelector("#custom-postcode-form");l&&(l.style.display="none");var p=i.querySelector(".woo-better-product-name");if(p){var b=p.childNodes[1];b&&b.nodeType===Node.TEXT_NODE&&(b.textContent=" Produto: ".concat(e.data.product_name))}if(i){var m=i.querySelector(".woo-better-current-postcode-text"),y=i.querySelector(".woo-better-shipping-list");m&&(m.innerHTML="<strong>CEP</strong>: ".concat(a)),y&&(y.innerHTML="<li>Produto digital, não há taxas de envio.</li>"),i.style.display="block";var h=i.querySelector(".woo-better-content-block");h&&(h.classList.add("expanded"),h.style.display="block")}s()}else{var f=e.data.message||"Erro ao processar as taxas de envio.";f.toLowerCase().includes("cep")&&alert(f),s()}}).catch(function(e){e.message&&e.message.toLowerCase().includes("cep")&&alert(e.message),s()})}else s(),e.message&&e.message.toLowerCase().includes("cep")&&alert("Houve um erro ao consultar o CEP.")}).catch(function(e){s(),clearTimeout(w),"AbortError"===e.name||e.message&&!e.message.toLowerCase().includes("fetch")&&alert("Erro na consulta do CEP. Tente novamente.")});case 2:return e.a(2)}},o)}),l=function(){var e=this,t=arguments;return new Promise(function(r,a){var c=n.apply(e,t);function i(e){o(c,r,a,i,s,"next",e)}function s(e){o(c,r,a,i,s,"throw",e)}i(void 0)})},l.apply(this,arguments)}function u(e,o,n,r){return new Promise(function(a,c){try{var i=e;if(!i||!Array.isArray(i.shipping_rates)||0===i.shipping_rates.length)return c("Nenhuma taxa de envio foi encontrada.");!function(e,t,o){var n=b();n[e]||(n[e]={});var r={product:o.product,shipping_rates:o.shipping_rates,timestamp:Date.now()};n[e][t]=r,localStorage.setItem("woo_better_product_cache",JSON.stringify(n))}(r,t.product_id,i),g(r),o.style.display="none";var s=n.querySelector(".woo-better-content-block").querySelector(".woo-better-shipping-list"),d=n.querySelector(".woo-better-product-name");if(d){var l=d.childNodes[1];l&&l.nodeType===Node.TEXT_NODE&&(l.textContent=" Produto: ".concat(i.product.name))}var u=n.querySelector(".woo-better-product-quantity");if(u){var p=u.childNodes[1];p&&p.nodeType===Node.TEXT_NODE&&(p.textContent=" Quantidade: ".concat(i.product.quantity))}s.innerHTML="",i.shipping_rates.forEach(function(e){var t=document.createElement("li"),o=parseFloat(e.cost).toFixed(i.product.currency_minor_unit).replace(".",",");t.innerHTML="<strong>".concat(i.product.currency_symbol," ").concat(o,"</strong> - ").concat(e.label),s.appendChild(t)}),n.querySelector(".woo-better-current-postcode-text").innerHTML="<strong>CEP</strong>: ".concat(r);var m=n.querySelector(".woo-better-update-date");if(m){var y=(new Date).toLocaleDateString("pt-BR");m.textContent="Atualizado em ".concat(y),m.classList.remove("flash"),m.offsetWidth,m.classList.add("flash"),setTimeout(function(){m.classList.remove("flash")},2e3)}var h=n.querySelector(".woo-better-update-icon"),f=n.querySelector(".woo-better-update-icon-container");h&&h.classList.contains("spinning")&&setTimeout(function(){h.classList.remove("spinning"),f&&f.classList.remove("spinning-container")},800),a()}catch(e){c(e)}})}function p(e,o,n,r){try{var a=e;o.style.display="none",g(r);var c=document.querySelector(".woo-better-current-postcode-block");c&&(c.style.display="flex");var i=n.querySelector(".woo-better-content-block").querySelector(".woo-better-shipping-list"),s=n.querySelector(".woo-better-product-name");if(s){var l=s.childNodes[1];l&&l.nodeType===Node.TEXT_NODE&&(l.textContent=" Produto: ".concat(a.product.name))}var u=n.querySelector(".woo-better-product-quantity");if(u){var p=u.childNodes[1];p&&p.nodeType===Node.TEXT_NODE&&(p.textContent=" Quantidade: ".concat(a.product.quantity))}i.innerHTML="",a.shipping_rates.forEach(function(e){var t=document.createElement("li"),o=parseFloat(e.cost).toFixed(a.product.currency_minor_unit).replace(".",",");t.innerHTML="<strong>".concat(a.product.currency_symbol," ").concat(o,"</strong> - ").concat(e.label),i.appendChild(t)}),n.querySelector(".woo-better-current-postcode-text").innerHTML="<strong>CEP</strong>: ".concat(r);var m=n.querySelector(".woo-better-update-date");if(m){var y=(new Date).toLocaleDateString("pt-BR");m.textContent="Atualizado em ".concat(y),m.classList.remove("flash"),m.offsetWidth,m.classList.add("flash"),setTimeout(function(){m.classList.remove("flash")},2e3)}var h=n.querySelector(".woo-better-update-icon"),f=n.querySelector(".woo-better-update-icon-container");h&&h.classList.contains("spinning")&&setTimeout(function(){h.classList.remove("spinning"),f&&f.classList.remove("spinning-container")},800),n.style.display="block";var v=n.querySelector(".woo-better-toggle-button");v&&(v.innerHTML="",d(v,"up","Esconder detalhes de entrega"));var w=n.querySelector(".woo-better-content-block");w&&!w.classList.contains("expanded")?(w.style.height="0",w.style.display="block",w.offsetHeight,w.classList.add("expanded"),w.style.height="".concat(w.scrollHeight,"px"),w.addEventListener("transitionend",function(){w.classList.contains("expanded")&&(w.style.height="auto")},{once:!0})):w&&w.classList.contains("expanded")&&(w.style.height="auto",w.style.display="block")}catch(e){var _=b();_[r]&&_[r][t.product_id]&&(delete _[r][t.product_id],localStorage.setItem("woo_better_product_cache",JSON.stringify(_)))}}function b(){var e="woo_better_product_cache",o=localStorage.getItem(e);if(o)try{var n=JSON.parse(o);if(!y())return localStorage.removeItem(e),{};var r=parseInt(t.cache_time)||0;if(r>0){var a=60*r*1e3,c=!1;Object.keys(n).forEach(function(e){Object.keys(n[e]).forEach(function(t){Date.now()-n[e][t].timestamp>a&&(delete n[e][t],c=!0)}),0===Object.keys(n[e]).length&&(delete n[e],c=!0)}),c&&localStorage.setItem(e,JSON.stringify(n))}return n}catch(t){return localStorage.removeItem(e),{}}return{}}function m(e,t){var o=b();return o[e]&&o[e][t]?o[e][t]:null}function y(){var e=t.cache_token||"";return v().token===e}function h(){var e=t.cache_token||"",o=v();o.token=e,o.last_token_update=Date.now(),localStorage.setItem("woo_better_token_cache_data",JSON.stringify(o))}function f(){if(!y())return w(),null;var e=y()&&v().shared_postcode||null;if(e)return e;var o=parseInt(t.cache_time)||0;if(0===o){var n=b(),r=Object.keys(n);return r.length>0?r[0]:null}for(var a=b(),c=60*o*1e3,i=0,s=Object.keys(a);i<s.length;i++)for(var d=s[i],l=0,u=Object.keys(a[d]);l<u.length;l++){var p=u[l];if(Date.now()-a[d][p].timestamp<c)return d}return null}function g(e){!function(e){var t=v();t.shared_postcode=e,t.last_updated=Date.now();localStorage.setItem("woo_better_token_cache_data",JSON.stringify(t))}(e),h()}function v(){var e=localStorage.getItem("woo_better_token_cache_data");if(e)try{return JSON.parse(e)}catch(e){return{}}return{}}function w(){localStorage.removeItem("woo_better_product_cache"),localStorage.removeItem("woo_better_cart_cache"),localStorage.removeItem("woo_better_token_cache_data"),localStorage.removeItem("woo_better_token_cache"),localStorage.removeItem("woo_better_postcode_cache"),localStorage.removeItem("woo_better_last_postcode"),localStorage.removeItem("woo_better_cart_postcode_cache_simple")}!function(){var e=document.createElement("style"),o=t.inputStyles.backgroundColor||"#ffffff",n=function(e){e=e.replace("#","");var t=parseInt(e,16),o=(t>>16)-10,n=(t>>8&255)-10,r=(255&t)-10;return o=Math.max(0,Math.min(255,o)),n=Math.max(0,Math.min(255,n)),r=Math.max(0,Math.min(255,r)),"#".concat((o<<16|n<<8|r).toString(16).padStart(6,"0"))}(o),r="#007cba";switch(t.iconColor||"blue-icon"){case"black-icon":r="#000000";break;case"gray-icon":r="#666666";break;case"red-icon":r="#dc3545";break;case"pink-icon":r="#e91e63";break;case"green-icon":r="#28a745";break;default:r="#007cba"}var a="\n            .woo-better-info-block {\n                color: ".concat(t.inputStyles.color," !important;\n                border-radius: ").concat(t.inputStyles.borderRadius," !important;\n                padding: 0px !important;\n                margin: 20px 0px !important;\n                font-family: 'Poppins', sans-serif !important;\n                font-size: 14px !important;\n            }\n\n            .woo-better-current-postcode-block {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                padding: 15px;\n                border: 1px solid #ddd;\n                border-radius: 5px;\n                background-color: ").concat(n," !important;\n                min-width: 200px;\n            }\n\n            .woo-better-content-block {\n                margin-top: -3px;\n                padding: 0px 20px;\n                background-color: ").concat(o," !important;\n                border: none;\n                height: 0;\n                overflow: hidden;\n                transition: height 0.3s ease;\n                box-shadow: none;\n            }\n\n            .woo-better-content-block.expanded {\n                height: auto; \n                padding: 10px 20px;\n                border-bottom-right-radius: ").concat(t.inputStyles.borderRadius," !important;\n                border-bottom-left-radius: ").concat(t.inputStyles.borderRadius," !important;\n                border: ").concat(t.inputStyles.borderWidth," ").concat(t.inputStyles.borderStyle," ").concat(t.inputStyles.borderColor," !important;\n                border-top: 0px !important;\n            }\n\n            .woo-better-separator {\n                border: none;\n                border-top: 1px solid #e0e0e0;\n                margin: 15px 0;\n                opacity: 0.6;\n            }\n\n            .woo-better-update-section {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                margin-top: 10px;\n                padding: 10px 0;\n            }\n\n            .woo-better-update-icon-container {\n                flex-shrink: 0;\n                width: 44px;\n                height: 44px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n                border-radius: 50%;\n                border: none;\n                background: transparent;\n                padding: 0;\n                transition: background-color 0.3s ease;\n                outline: none;\n            }\n\n            .woo-better-update-icon-container:focus {\n                outline: none;\n                box-shadow: none;\n            }\n\n            .woo-better-update-icon-container:hover {\n                background-color: ").concat(r,"1a;\n            }\n\n            .woo-better-update-icon-container:hover .woo-better-update-icon {\n                opacity: 1;\n                transform: rotate(180deg);\n            }\n\n            .woo-better-update-icon {\n                width: 32px;\n                height: 32px;\n                opacity: 0.8;\n                transition: transform 0.3s ease, opacity 0.3s ease;\n            }\n\n            .woo-better-update-icon.spinning {\n                animation: woo-better-spin 1s linear infinite;\n                opacity: 1;\n            }\n\n            .woo-better-update-icon-container.spinning-container {\n                opacity: 0.8 !important;\n                cursor: not-allowed !important;\n            }\n\n            .woo-better-update-icon-container.spinning-container:hover {\n                background-color: transparent !important;\n            }\n\n            .woo-better-update-icon-container.spinning-container:hover .woo-better-update-icon {\n                transform: none !important;\n            }\n\n            @keyframes woo-better-spin {\n                from { transform: rotate(0deg); }\n                to { transform: rotate(360deg); }\n            }\n\n            .woo-better-update-text-container {\n                flex: 1;\n                line-height: 1.4;\n            }\n\n            .woo-better-update-date {\n                width: fit-content;\n                padding: 3px;\n                font-size: 13px;\n                font-weight: 600;\n                margin: 0 0 4px 0;\n                color: ").concat(t.inputStyles.color||"#333",";\n                opacity: 0.8;\n                transition: all 0.3s ease;\n            }\n\n            .woo-better-update-date.flash {\n                animation: woo-better-flash 2s ease-in-out;\n            }\n\n            @keyframes woo-better-flash {\n                0%, 100% { \n                    background-color: transparent;\n                }\n                20%, 80% { \n                    background-color: ").concat(r,"26;\n                    border-radius: 4px;\n                }\n            }\n\n            .woo-better-info-text {\n                font-size: 12px;\n                padding: 3px;\n                margin: 0;\n                color: ").concat(t.inputStyles.color||"#333",";\n                opacity: 0.7;\n                line-height: 1.3;\n            }\n        ");e.appendChild(document.createTextNode(a)),document.head.appendChild(e)}(),y()||(w(),h()),new MutationObserver(function(e,o){e.forEach(function(e){if("childList"===e.type){var a=function(){if("custom"===t.position)r=t.custom_position||'h1[class*="title"]';else{var e=t.position||"top";"middle"===e?r='div[class*="price"], p[class*="price"]':"bottom"===e&&(r='form[class*="cart"]')}return r}(),s=document.querySelector(a),u=document.querySelector(".wc-block-components-shipping-calculator-address"),p=document.querySelector(".woo-better-parent-container");if(s&&!n&&!u){n=!0,p&&p.remove();var y=function(){var e=document.createElement("div");return e.classList.add("woo-better-parent-container"),e}(),h=function(){var e=document.createElement("form");e.id="custom-postcode-form",e.style.marginTop="20px",e.style.padding="0px";var o=f();o&&"yes"===t.enable_search&&(e.style.display="none");var n=document.createElement("div");n.classList.add("woo-better-container-current-style");var r=document.createElement("div");r.classList.add("woo-better-input-button-group-current-style");var a=document.createElement("div");a.classList.add("woo-better-input-wrapper-current-style");var i=document.createElement("input");i.type="text",i.name="woo_better_custom_product_postcode",i.placeholder=t.placeholder||"Digite o CEP",i.classList.add("woo-better-input-current-style"),i.autocomplete="postal-code",o&&(i.value=o);var s=t.inputStyles||{};Object.keys(s).forEach(function(e){i.style[e]=s[e]}),i.addEventListener("input",function(e){var t=e.target.value;if((t=t.replace(/[^\d-]/g,"")).includes("-")){var o,n=t.split("-");n.length>2||n[0].length>5?t=n[0].slice(0,5)+"-"+(null===(o=n[1])||void 0===o?void 0:o.slice(0,3)):n[0].length<5&&(t=n[0])}t.length>5&&!t.includes("-")&&(t=t.slice(0,5)+"-"+t.slice(5)),t.length>9&&(t=t.slice(0,9)),e.target.value=t});var d=document.createElement("img");d.src=t.icon,d.alt="Ícone de entrega",d.classList.add("woo-better-icon-current-style"),d.classList.add(t.iconColor||"black-icon"),a.appendChild(i),a.appendChild(d);var u=document.createElement("button");u.type="submit",u.textContent="CONSULTAR",u.classList.add("woo-better-button-current-style");var p=t.buttonStyles||{};Object.keys(p).forEach(function(e){u.style[e]=p[e]}),r.appendChild(a),r.appendChild(u),n.appendChild(r);var y=document.createElement("a");return y.href="https://buscacepinter.correios.com.br/app/endereco/index.php",y.textContent="Não sei meu CEP",y.classList.add("woo-better-link-current-style"),y.target="_blank",n.appendChild(y),e.appendChild(n),e.addEventListener("submit",function(e){e.preventDefault();var o=i.value.trim();if(/^\d{5}-\d{3}$/.test(o)){u.disabled=!0,i.disabled=!0,m(o,t.product_id);var n=document.querySelector(".woo-better-info-block"),r=b(),a=r[o]&&Object.keys(r[o]).length>0,s=n&&("block"===n.style.display||"block"===getComputedStyle(n).display);!n||a||s||(n.style.display="none"),c=u.textContent,u.textContent="";var d=document.createElement("span");d.classList.add("loading-icon"),u.appendChild(d),i.style.backgroundColor="#f0f0f0",i.style.cursor="not-allowed",u.style.backgroundColor="#ccc",u.style.cursor="not-allowed",function(e){l.apply(this,arguments)}(o)}else alert("Por favor, insira um CEP válido no formato XXXXX-XXX.")}),e}(),g={product:{name:"*******",quantity:t.quantity,currency_symbol:"R$",currency_minor_unit:2},shipping_rates:[{id:"**********",label:"***********",cost:12.34}],postcode:"123456-789"},v=function(e,o,n,r){var a=document.createElement("div");a.classList.add("woo-better-info-block");var c=f();if(c&&"yes"===t.enable_search){var i=b(),s=i[c]&&Object.keys(i[c]).length>0;a.style.display=s?"block":"none"}else a.style.display="none";var l=document.createElement("div");l.classList.add("woo-better-content-block"),l.style.display="none";var u=document.createElement("p"),p=document.createElement("img");p.src=t.details_icon.product,p.alt="Produto",p.classList.add("woo-better-icon"),p.classList.add(t.iconColor||"black-icon"),u.appendChild(p);var m=document.createTextNode(" Produto");u.appendChild(m),u.classList.add("woo-better-product-name");var y=document.createElement("p"),h=document.createElement("img");h.src=t.details_icon.quantity,h.alt="Quantidade",h.classList.add("woo-better-icon"),h.classList.add(t.iconColor||"black-icon"),y.appendChild(h);var g=document.createTextNode(" Quantidade: ".concat(e.quantity));y.appendChild(g),y.classList.add("woo-better-product-quantity");var v=document.createElement("div");v.classList.add("woo-better-shipping-methods");var w=document.createElement("p"),_=document.createElement("img");_.src=t.icon,_.alt="Entrega",_.classList.add("woo-better-icon"),_.classList.add(t.iconColor||"black-icon"),w.appendChild(_);var S=document.createTextNode(" Métodos de Entrega:");w.appendChild(S),v.appendChild(w);var k=document.createElement("ul");k.classList.add("woo-better-shipping-list"),o.forEach(function(t){var o=document.createElement("li");o.innerHTML="<strong>".concat(e.currency_symbol," ").concat(parseFloat(t.cost).toFixed(e.currency_minor_unit).replace(".",","),"</strong> - ").concat(t.label),k.appendChild(o)}),v.appendChild(k);var x=document.createElement("hr");x.classList.add("woo-better-separator");var L=document.createElement("div");L.classList.add("woo-better-update-section");var C=document.createElement("button");C.type="button",C.classList.add("woo-better-update-icon-container"),C.title="Clique para atualizar os dados de frete";var E=document.createElement("img");E.src=t.update_icon.updates,E.alt="Atualizado",E.classList.add("woo-better-update-icon"),E.classList.add(t.iconColor||"black-icon"),C.addEventListener("click",function(){if(!E.classList.contains("spinning")){var e=f();if(e){E.classList.add("spinning"),C.classList.add("spinning-container");var o=b();o[e]&&o[e][t.product_id]&&(delete o[e][t.product_id],localStorage.setItem("woo_better_product_cache",JSON.stringify(o)));var n=document.querySelector(".woo-better-button-current-style");if(n){var r=document.querySelector(".woo-better-input-current-style");r&&!r.value&&(r.value=e),n.click()}}}}),C.appendChild(E);var q=document.createElement("div");q.classList.add("woo-better-update-text-container");var T=document.createElement("p");T.classList.add("woo-better-update-date");var O=(new Date).toLocaleDateString("pt-BR");T.textContent="Atualizado em ".concat(O);var N=document.createElement("p");N.classList.add("woo-better-info-text"),N.textContent="Valor de frete estimado para este item. No carrinho, será exibido o frete total da compra.",q.appendChild(T),q.appendChild(N),L.appendChild(C),L.appendChild(q),l.appendChild(u),l.appendChild(y),l.appendChild(v),l.appendChild(x),l.appendChild(L);var j=function(e,t){var o=document.createElement("div");o.classList.add("woo-better-current-postcode-block");var n=document.createElement("div");n.classList.add("woo-better-toggle-postcode-wrapper");var r=document.createElement("button");r.type="button",d(r,"up","Esconder detalhes de entrega"),r.classList.add("woo-better-toggle-button");var a=document.createElement("span");a.innerHTML="<strong>CEP</strong>: ".concat(e),a.classList.add("woo-better-current-postcode-text"),r.addEventListener("click",function(){var e=document.querySelector(".woo-better-content-block");e&&(e.classList.contains("expanded")?(e.style.height="".concat(e.scrollHeight,"px"),requestAnimationFrame(function(){e.style.height="0"}),e.classList.remove("expanded"),r.innerHTML="",d(r,"down","Exibir detalhes de entrega")):(e.style.height="".concat(e.scrollHeight,"px"),e.classList.add("expanded"),r.innerHTML="",d(r,"up","Esconder detalhes de entrega"),e.addEventListener("transitionend",function(){e.classList.contains("expanded")&&(e.style.height="".concat(e.scrollHeight,"px"))},{once:!0})))}),n.appendChild(r),n.appendChild(a);var c=document.createElement("button");return c.type="button",c.textContent="Alterar",c.classList.add("woo-better-change-postcode-button"),c.addEventListener("click",function(){var e=document.querySelector(".woo-better-info-block");e&&(e.style.display="none"),t.style.display="block"}),o.appendChild(n),o.appendChild(c),o}(n,r);return a.appendChild(j),a.appendChild(l),a}(g.product,g.shipping_rates,g.postcode,h);y.appendChild(h),y.appendChild(v),s.insertAdjacentElement("afterend",y),w=function(){var e=f();if(e){var n=document.querySelector(".woo-better-input-current-style");if(n&&(n.value=e,t.enable_search&&"yes"===t.enable_search)){var r=document.querySelector(".woo-better-info-block");if(r){r.style.display="block";var a=r.querySelector(".woo-better-shipping-list");a&&(a.innerHTML="<li>Carregando taxas de envio...</li>");var c=r.querySelector(".woo-better-toggle-button");c&&(c.innerHTML="",d(c,"up","Esconder detalhes de entrega"));var i=r.querySelector(".woo-better-content-block");i&&(i.classList.add("expanded"),i.style.display="block",i.style.height="auto");var s=r.querySelector(".woo-better-current-postcode-text");s&&(s.innerHTML="<strong>CEP</strong>: ".concat(e))}var l=document.querySelector(".woo-better-button-current-style");l&&l.click()}}o.disconnect()},(_=new FormData).append("action","wc_better_calc_get_nonce"),_.append("action_nonce","woo_better_register_product_address"),fetch(t.ajaxurl,{method:"POST",body:_}).then(function(e){return e.json()}).then(function(e){e.success&&e.data&&e.data.nonce&&(i=e.data.nonce),w()}).catch(function(){w()})}}var w,_})}).observe(document.body,{childList:!0,subtree:!0})})})();