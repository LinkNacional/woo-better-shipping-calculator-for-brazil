/*! For license information please see WcBetterShippingCalculatorForBrazilCustomCartPostcode.COMPILED.js.LICENSE.txt */
(()=>{function t(){var n,o,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function i(t,r,a,c){var i=r&&r.prototype instanceof d?r:d,l=Object.create(i.prototype);return e(l,"_invoke",function(t,e,r){var a,c,i,d=0,l=r||[],u=!1,p={p:0,n:0,v:n,a:y,f:y.bind(n,4),d:function(t,e){return a=t,c=0,i=n,p.n=e,s}};function y(t,e){for(c=t,i=e,o=0;!u&&d&&!r&&o<l.length;o++){var r,a=l[o],y=p.p,m=a[2];t>3?(r=m===e)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=n):a[0]<=y&&((r=t<2&&y<a[1])?(c=0,p.v=e,p.n=a[1]):y<m&&(r=t<3||a[0]>e||e>m)&&(a[4]=t,a[5]=e,p.n=m,c=0))}if(r||t>1)return s;throw u=!0,e}return function(r,l,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&y(l,m),c=l,i=m;(o=c<2?n:i)||!u;){a||(c?c<3?(c>1&&(p.n=-1),y(c,i)):p.n=i:p.v=i);try{if(d=2,a){if(c||(r="next"),o=a[r]){if(!(o=o.call(a,i)))throw TypeError("iterator result is not an object");if(!o.done)return o;i=o.value,c<2&&(c=0)}else 1===c&&(o=a.return)&&o.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),c=1);a=n}else if((o=(u=p.n<0)?i:t.call(e,p))!==s)break}catch(t){a=n,c=1,i=t}finally{d=1}}return{value:o,done:u}}}(t,a,c),!0),l}var s={};function d(){}function l(){}function u(){}o=Object.getPrototypeOf;var p=[][a]?o(o([][a]())):(e(o={},a,function(){return this}),o),y=u.prototype=d.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t}return l.prototype=u,e(y,"constructor",u),e(u,"constructor",l),l.displayName="GeneratorFunction",e(u,c,"GeneratorFunction"),e(y),e(y,c,"Generator"),e(y,a,function(){return this}),e(y,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m}})()}function e(t,n,o,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function(t,n,o,r){function c(n,o){e(t,n,function(t){return this._invoke(n,o,t)})}n?a?a(t,n,{value:o,enumerable:!r,configurable:!r,writable:!r}):t[n]=o:(c("next",0),c("throw",1),c("return",2))},e(t,n,o,r)}function n(t,e,n,o,r,a,c){try{var i=t[a](c),s=i.value}catch(t){return void n(t)}i.done?e(s):Promise.resolve(s).then(o,r)}document.addEventListener("DOMContentLoaded",function(){var e=window.WooBetterData||{},o=!1,r='h2[class*="order"]',a="",c="",i="",s="",d=!1,l=null;function u(){l&&clearTimeout(l),l=setTimeout(function(){g();var t=function(){for(var t=S(),e=JSON.stringify(t),n=0,o=0;o<e.length;o++)n=(n<<5)-n+e.charCodeAt(o),n&=n;return Math.abs(n).toString()}(),e=t!==s;s=t;var n=C(),o=document.querySelector(".woo-better-info-block"),r=o&&"none"!==o.style.display;if(n&&e)if(r||d)d=!0,g(),b(n,!0);else{o&&(o.style.display="none");var a=document.querySelector("#custom-postcode-form");if(a){a.style.display="block";var c=a.querySelector(".woo-better-input-current-style");c&&(c.value=n)}}l=null},2e3)}function p(){var t=document.querySelector(".woo-better-button-current-style"),n=document.querySelector(".woo-better-input-current-style");t.disabled=!1,n.disabled=!1,t.textContent=c;var o=document.querySelector(".woo-better-current-postcode-block");o&&(o.style.display="flex"),n.style.backgroundColor=e.inputStyles.backgroundColor||"#fff",n.style.cursor="",t.style.backgroundColor=e.buttonStyles.backgroundColor||"#0073aa",t.style.cursor="";var r=document.querySelector(".woo-better-update-icon"),a=document.querySelector(".woo-better-update-icon-container");r&&r.classList.contains("spinning")&&setTimeout(function(){r.classList.remove("spinning"),a&&a.classList.remove("spinning-container")},800)}function y(t,n,o){var r=document.createElement("img");r.src=e.display_icon[n],r.alt=o,r.classList.add("woo-better-toggle-icon"),r.classList.add(e.iconColor||"black-icon"),t.appendChild(r)}function m(){if("custom"===e.position)r=e.custom_position||'h2[class*="order"]';else{var t=e.position||"top";r="middle"===t?'div[class*="shipping-block"]':"bottom"===t?'div[class*="totals-footer"]':'h2[class*="order"]'}return r}function b(t){return f.apply(this,arguments)}function f(){var o;return o=t().m(function n(o){var r,c,s,l,u,y,m,b=arguments;return t().w(function(t){for(;;)switch(t.n){case 0:if((r=b.length>1&&void 0!==b[1]&&b[1])&&(d=!0),r){t.n=1;break}if(!(c=_(o))){t.n=1;break}return setTimeout(function(){var t=document.querySelector(".woo-better-info-block"),e=document.querySelector("#custom-postcode-form");v(c,e,t,o),p()},300),t.a(2);case 1:return s=document.querySelector(".woo-better-info-block"),l=s&&"block"===s.style.display,s&&!l?s.style.display="none":s&&l&&(u=s.querySelector(".woo-better-shipping-list"))&&(u.innerHTML="<li>Recalculando taxas de envio...</li>"),y=new AbortController,m=setTimeout(function(){return y.abort()},15e3),"undefined"!=typeof wpApiSettings&&wpApiSettings.root?apiUrl=wpApiSettings.root+"lknwcbettershipping/v1/cep/?postcode=".concat(o):void 0!==e&&""!==e.wooUrl?apiUrl=e.wooUrl+"/wp-json/lknwcbettershipping/v1/cep/?postcode=".concat(o):apiUrl="/wp-json/lknwcbettershipping/v1/cep/?postcode=".concat(o),t.n=2,fetch(apiUrl,{method:"GET",signal:y.signal,headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){if(clearTimeout(m),!0===t.status){a=o,addressData=t.address||"",stateData=t.state_sigla||"",cityData=t.city||"";var n=e.ajaxurl,r=new FormData;r.append("action","register_cart_address"),r.append("shipping[address_1]",addressData),r.append("shipping[city]",cityData),r.append("shipping[state]",stateData),r.append("shipping[postcode]",a),r.append("shipping[country]","BR"),fetch(n,{method:"POST",headers:{nonce:i},body:r}).then(function(t){return t.json()}).then(function(t){if(t.success){var e=document.querySelector(".woo-better-info-block"),n=document.querySelector("#custom-postcode-form");h(t.data,n,e,o).then(function(){p()}).catch(function(t){p(),t&&t.includes&&t.includes("CEP")&&alert(t)})}else if(t.data.digital){var r=document.querySelector(".woo-better-info-block"),c=document.querySelector("#custom-postcode-form");c&&(c.style.display="none");var i=r.querySelector(".woo-better-cart-quantity");if(i){var s=i.childNodes[1];s&&s.nodeType===Node.TEXT_NODE&&(s.textContent=" Quantidade: ".concat(t.data.cart_count))}if(r){var d=r.querySelector(".woo-better-current-postcode-text"),l=r.querySelector(".woo-better-shipping-list");d&&(d.innerHTML="<strong>CEP</strong>: ".concat(a)),l&&(l.innerHTML="<li>Produto digital, não há taxas de envio.</li>"),r.style.display="block";var u=r.querySelector(".woo-better-content-block");u&&(u.classList.add("expanded"),u.style.display="block")}p()}else{var y=t.data.message||"Erro ao processar as taxas de envio.";y.toLowerCase().includes("cep")&&alert(y),p()}}).catch(function(t){t.message&&t.message.toLowerCase().includes("cep")&&alert(t.message),p()})}else p(),t.message&&t.message.toLowerCase().includes("cep")&&alert("Houve um erro ao consultar o CEP.")}).catch(function(t){p(),clearTimeout(m),"AbortError"===t.name||t.message&&!t.message.toLowerCase().includes("fetch")&&alert("Erro na consulta do CEP. Tente novamente.")});case 2:return t.a(2)}},n)}),f=function(){var t=this,e=arguments;return new Promise(function(r,a){var c=o.apply(t,e);function i(t){n(c,r,a,i,s,"next",t)}function s(t){n(c,r,a,i,s,"throw",t)}i(void 0)})},f.apply(this,arguments)}function h(t,e,n,o){return new Promise(function(r,a){try{var c=t;if(!c||!Array.isArray(c.shipping_rates)||0===c.shipping_rates.length)return a("Nenhuma taxa de envio foi encontrada.");!function(t,e){var n=w(),o=S(),r={cart:e.cart,shipping_rates:e.shipping_rates,cart_data:o,timestamp:Date.now()};n[t]=r,localStorage.setItem("woo_better_cart_cache",JSON.stringify(n))}(o,c),E(o),d=!0,e.style.display="none",n.style.display="block";var i=n.querySelector(".woo-better-content-block"),s=i.querySelector(".woo-better-shipping-list"),l=n.querySelector(".woo-better-cart-quantity");if(l){var u=l.childNodes[1];u&&u.nodeType===Node.TEXT_NODE&&(u.textContent=" Quantidade: ".concat(c.cart.quantity))}s.innerHTML="",c.shipping_rates.forEach(function(t){var e=document.createElement("li"),n=parseFloat(t.cost).toFixed(c.cart.currency_minor_unit).replace(".",","),o=document.createElement("div");o.innerHTML=c.cart.currency_symbol;var r=o.textContent||o.innerText||c.cart.currency_symbol;e.innerHTML="<strong>".concat(r," ").concat(n,"</strong> - ").concat(t.label),s.appendChild(e)}),n.querySelector(".woo-better-current-postcode-text").innerHTML="<strong>CEP</strong>: ".concat(o);var p=n.querySelector(".woo-better-update-date");if(p){var m=(new Date).toLocaleString("pt-BR");p.textContent="Atualizado em ".concat(m),p.classList.remove("flash"),p.offsetWidth,p.classList.add("flash"),setTimeout(function(){p.classList.remove("flash")},2e3)}var b=n.querySelector(".woo-better-update-icon"),f=n.querySelector(".woo-better-update-icon-container");b&&b.classList.contains("spinning")&&setTimeout(function(){b.classList.remove("spinning"),f&&f.classList.remove("spinning-container")},800);var h=n.querySelector(".woo-better-toggle-button");h&&(h.innerHTML="",y(h,"up","Esconder detalhes de entrega")),i&&!i.classList.contains("expanded")?(i.style.height="0",i.style.display="block",i.offsetHeight,i.classList.add("expanded"),i.style.height="".concat(i.scrollHeight,"px"),i.addEventListener("transitionend",function(){i.classList.contains("expanded")&&(i.style.height="auto")},{once:!0})):i&&i.classList.contains("expanded")&&(i.style.height="auto",i.style.display="block"),r()}catch(t){a(t)}})}function v(t,e,n,o){try{var r=t;e.style.display="none",E(o);var a=document.querySelector(".woo-better-current-postcode-block");a&&(a.style.display="flex");var c=n.querySelector(".woo-better-content-block").querySelector(".woo-better-shipping-list"),i=n.querySelector(".woo-better-cart-quantity");if(i){var s=i.childNodes[1];s&&s.nodeType===Node.TEXT_NODE&&(s.textContent=" Quantidade: ".concat(r.cart.quantity))}c.innerHTML="",r.shipping_rates.forEach(function(t){var e=document.createElement("li"),n=parseFloat(t.cost).toFixed(r.cart.currency_minor_unit).replace(".",","),o=document.createElement("div");o.innerHTML=r.cart.currency_symbol;var a=o.textContent||o.innerText||r.cart.currency_symbol;e.innerHTML="<strong>".concat(a," ").concat(n,"</strong> - ").concat(t.label),c.appendChild(e)}),n.querySelector(".woo-better-current-postcode-text").innerHTML="<strong>CEP</strong>: ".concat(o);var d,l=n.querySelector(".woo-better-update-date");l&&(d=r.timestamp?new Date(r.timestamp).toLocaleString("pt-BR"):(new Date).toLocaleString("pt-BR"),l.textContent="Atualizado em ".concat(d));var u=n.querySelector(".woo-better-update-icon"),p=n.querySelector(".woo-better-update-icon-container");u&&u.classList.contains("spinning")&&setTimeout(function(){u.classList.remove("spinning"),p&&p.classList.remove("spinning-container")},800),n.style.display="block";var m=n.querySelector(".woo-better-toggle-button");m&&(m.innerHTML="",y(m,"up","Esconder detalhes de entrega"));var b=n.querySelector(".woo-better-content-block");b&&!b.classList.contains("expanded")?(b.style.height="0",b.style.display="block",b.offsetHeight,b.classList.add("expanded"),b.style.height="".concat(b.scrollHeight,"px"),b.addEventListener("transitionend",function(){b.classList.contains("expanded")&&(b.style.height="auto")},{once:!0})):b&&b.classList.contains("expanded")&&(b.style.height="auto",b.style.display="block")}catch(t){var f=w();f[o]&&(delete f[o],localStorage.setItem("woo_better_cart_cache",JSON.stringify(f)))}}function g(){var t=C();if(t){var e=w();e[t]&&(delete e[t],localStorage.setItem("woo_better_cart_cache",JSON.stringify(e)))}}function w(){var t="woo_better_cart_cache",n=localStorage.getItem(t);if(n)try{var o=JSON.parse(n);if(!L())return localStorage.removeItem(t),{};var r=parseInt(e.cache_time)||0;if(r>0){var a=60*r*1e3,c=!1;Object.keys(o).forEach(function(t){Date.now()-o[t].timestamp>a&&(delete o[t],c=!0)}),c&&localStorage.setItem(t,JSON.stringify(o))}return o}catch(e){return localStorage.removeItem(t),{}}return{}}function _(t){var e=w(),n=S();if(e[t]){var o=e[t];return k(n,o.cart_data)?o:null}return null}function S(){var t=[];if(window.wc&&window.wc.wcBlocksData&&window.wp&&window.wp.data)try{var n=window.wp.data.select("wc/store/cart");if(n){var o=n.getCartData?n.getCartData().items:n.getItems?n.getItems():null;o&&Array.isArray(o)&&o.length>0&&(t=o.map(function(t){var e=t.variation_id||t.variation||0;return Array.isArray(e)&&(e=e.length>0?e[0]:0),{id:t.id||t.product_id||t.key,quantity:parseInt(t.quantity)||1,variation_id:e}}))}}catch(t){}if(0===t.length&&window.wc&&window.wc.wcBlocksData&&window.wc.wcBlocksData.cartItems&&(t=window.wc.wcBlocksData.cartItems.map(function(t){var e=t.variation_id||0;return Array.isArray(e)&&(e=e.length>0?e[0]:0),{id:t.id||t.product_id,quantity:t.quantity,variation_id:e}})),0===t.length&&window.wc_cart_fragments_params&&window.wc_cart_fragments_params.fragments){var r=window.wc_cart_fragments_params.fragments;Object.keys(r).forEach(function(e){var n=r[e];if("string"==typeof n){var o=document.createElement("div");o.innerHTML=n,o.querySelectorAll("[data-product-id], .cart-item, .wc-block-cart-items__row").forEach(function(e){var n,o=e.getAttribute("data-product-id")||e.getAttribute("data-key")||(null===(n=e.querySelector("[data-product-id]"))||void 0===n?void 0:n.getAttribute("data-product-id"));if(o){var r=e.querySelector('.qty, [name*="quantity"], .quantity'),a=r&&parseInt(r.value||r.textContent)||1,c=e.getAttribute("data-variation-id")||0;t.push({id:o,quantity:a,variation_id:c})}})}}),t.length}if(0===t.length&&(document.querySelectorAll('.wc-block-cart-items__row, .cart_item, [class*="cart-item"]').forEach(function(e){var n,o,r=e.getAttribute("data-product-id")||e.getAttribute("data-id")||(null===(n=e.querySelector("[data-product-id]"))||void 0===n?void 0:n.getAttribute("data-product-id")),a=e.querySelector('.wc-block-components-quantity-selector__input, input[name*="quantity"], .qty'),c=a&&parseInt(a.value)||1,i=e.getAttribute("data-variation-id")||(null===(o=e.querySelector("[data-variation-id]"))||void 0===o?void 0:o.getAttribute("data-variation-id"))||0;if(r){var s=i;Array.isArray(s)&&(s=s.length>0?s[0]:0),t.push({id:r,quantity:c,variation_id:s})}}),t.length),0===t.length)if(e.quantity)t.push({id:"unknown",quantity:e.quantity,variation_id:0});else{var a=document.querySelectorAll('.cart-contents-count, .wc-block-mini-cart__badge, [class*="cart-count"]'),c=0;a.forEach(function(t){var e=parseInt(t.textContent)||0;e>c&&(c=e)}),c>0&&t.push({id:"dom_fallback",quantity:c,variation_id:0})}return t.sort(function(t,e){return t.id!==e.id?t.id.toString().localeCompare(e.id.toString()):t.variation_id!==e.variation_id?t.variation_id-e.variation_id:t.quantity-e.quantity}),t}function k(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var o=t[n],r=e[n],a=function(t){return Array.isArray(t)?t.length>0?t[0]:0:t||0},c=a(o.variation_id),i=a(r.variation_id);if(o.id!=r.id||o.quantity!==r.quantity||c!==i)return!1}return!0}function L(){var t=e.cache_token||"";return q().token===t}function x(){var t=e.cache_token||"",n=q();n.token=t,n.last_token_update=Date.now(),localStorage.setItem("woo_better_token_cache_data",JSON.stringify(n))}function C(){if(!L())return T(),null;var t=L()&&q().shared_postcode||null;if(t)return t;var n=parseInt(e.cache_time)||0;if(0===n){var o=w(),r=Object.keys(o);return r.length>0?r[0]:null}for(var a=w(),c=60*n*1e3,i=0,s=Object.keys(a);i<s.length;i++){var d=s[i];if(Date.now()-a[d].timestamp<c)return d}return null}function E(t){!function(t){var e=q();e.shared_postcode=t,e.last_updated=Date.now();localStorage.setItem("woo_better_token_cache_data",JSON.stringify(e))}(t),x()}function q(){var t=localStorage.getItem("woo_better_token_cache_data");if(t)try{return JSON.parse(t)}catch(t){return{}}return{}}function T(){localStorage.removeItem("woo_better_cart_cache"),localStorage.removeItem("woo_better_product_cache"),localStorage.removeItem("woo_better_token_cache_data"),localStorage.removeItem("woo_better_token_cache"),localStorage.removeItem("woo_better_cart_postcode_cache_simple"),localStorage.removeItem("woo_better_last_postcode"),localStorage.removeItem("woo_better_postcode_cache")}function g(){var t=w(),e=S();e&&0!==e.length&&(Object.keys(t).forEach(function(n){var o=t[n];k(e,o.cart_data)||delete t[n]}),Object.keys(t).length>0&&localStorage.setItem("woo_better_cart_cache",JSON.stringify(t)))}!function(){var t=document.createElement("style"),n=e.inputStyles.backgroundColor||"#ffffff",o=function(t){t=t.replace("#","");var e=parseInt(t,16),n=(e>>16)-10,o=(e>>8&255)-10,r=(255&e)-10;return n=Math.max(0,Math.min(255,n)),o=Math.max(0,Math.min(255,o)),r=Math.max(0,Math.min(255,r)),"#".concat((n<<16|o<<8|r).toString(16).padStart(6,"0"))}(n),r="#007cba";switch(e.iconColor||"blue-icon"){case"black-icon":r="#000000";break;case"gray-icon":r="#666666";break;case"red-icon":r="#dc3545";break;case"pink-icon":r="#e91e63";break;case"green-icon":r="#28a745";break;default:r="#007cba"}var a="\n            .woo-better-info-block {\n                color: ".concat(e.inputStyles.color," !important;\n                border-radius: ").concat(e.inputStyles.borderRadius," !important;\n                padding: 0px !important;\n                margin: 20px 0px !important;\n                font-family: 'Poppins', sans-serif !important;\n                font-size: 14px !important;\n            }\n\n            .woo-better-current-postcode-block {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                padding: 15px;\n                border: 1px solid #ddd;\n                border-radius: 5px;\n                background-color: ").concat(o," !important;\n                min-width: 200px;\n            }\n\n            .woo-better-content-block {\n                margin-top: -3px;\n                padding: 0px 20px;\n                background-color: ").concat(n," !important;\n                border: none;\n                height: 0;\n                overflow: hidden;\n                transition: height 0.3s ease;\n                box-shadow: none;\n            }\n\n            .woo-better-content-block.expanded {\n                height: auto; \n                padding: 10px 20px;\n                border-bottom-right-radius: ").concat(e.inputStyles.borderRadius," !important;\n                border-bottom-left-radius: ").concat(e.inputStyles.borderRadius," !important;\n                border: ").concat(e.inputStyles.borderWidth," ").concat(e.inputStyles.borderStyle," ").concat(e.inputStyles.borderColor," !important;\n                border-top: 0px !important;\n            }\n\n            .woo-better-separator {\n                border: none;\n                border-top: 1px solid #e0e0e0;\n                margin: 15px 0;\n                opacity: 0.6;\n            }\n\n            .woo-better-update-section {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                margin-top: 10px;\n                padding: 10px 0;\n            }\n\n            .woo-better-update-icon-container {\n                flex-shrink: 0;\n                width: 44px;\n                height: 44px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n                border-radius: 50%;\n                border: none;\n                background: transparent;\n                padding: 0;\n                transition: background-color 0.3s ease;\n                outline: none;\n            }\n\n            .woo-better-update-icon-container:focus {\n                outline: none;\n                box-shadow: none;\n            }\n\n            .woo-better-update-icon-container:hover {\n                background-color: ").concat(r,"1a;\n            }\n\n            .woo-better-update-icon-container:hover .woo-better-update-icon {\n                opacity: 1;\n                transform: rotate(180deg);\n            }\n\n            .woo-better-update-icon {\n                width: 32px;\n                height: 32px;\n                opacity: 0.8;\n                transition: transform 0.3s ease, opacity 0.3s ease;\n                pointer-events: none;\n            }\n\n            .woo-better-update-icon.spinning {\n                animation: woo-better-spin 1s linear infinite;\n                opacity: 1;\n            }\n\n            .woo-better-update-icon-container.spinning-container {\n                opacity: 0.8 !important;\n                cursor: not-allowed !important;\n            }\n\n            .woo-better-update-icon-container.spinning-container:hover {\n                background-color: transparent !important;\n            }\n\n            .woo-better-update-icon-container.spinning-container:hover .woo-better-update-icon {\n                transform: none !important;\n            }\n\n            @keyframes woo-better-spin {\n                from { transform: rotate(0deg); }\n                to { transform: rotate(360deg); }\n            }\n\n            .woo-better-update-text-container {\n                flex: 1;\n                line-height: 1.4;\n            }\n\n            .woo-better-update-date {\n                width: fit-content;\n                padding: 3px;\n                font-size: 13px;\n                font-weight: 600;\n                margin: 0 0 4px 0;\n                color: ").concat(e.inputStyles.color||"#333",";\n                opacity: 0.8;\n                transition: all 0.3s ease;\n            }\n\n            .woo-better-update-date.flash {\n                animation: woo-better-flash 2s ease-in-out;\n            }\n\n            @keyframes woo-better-flash {\n                0%, 100% { \n                    background-color: transparent;\n                }\n                20%, 80% { \n                    background-color: ").concat(r,"26;\n                    border-radius: 4px;\n                }\n            }\n\n            .woo-better-info-text {\n                font-size: 12px;\n                padding: 3px;\n                margin: 0;\n                color: ").concat(e.inputStyles.color||"#333",";\n                opacity: 0.7;\n                line-height: 1.3;\n            }\n        ");t.appendChild(document.createTextNode(a)),document.head.appendChild(t)}(),L()||(T(),x()),setTimeout(function(){if(!o){var t=m();if(document.querySelector(t)){var e=new Event("DOMContentLoaded");document.dispatchEvent(e)}}},1e3),new MutationObserver(function(t,n){t.forEach(function(t){if("childList"===t.type){var r=m(),a=document.querySelector(r);if(a&&!o){o=!0,function(){function t(t){try{if(!t)return!1;var e="string"==typeof t?t:JSON.stringify(t);return e.includes("remove-item")||e.includes("update-item")}catch(t){return!1}}var e=window.fetch;window.fetch=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=o[0],c=o[1];if("string"==typeof a&&a.includes("/wp-json/wc/store/v1/batch")){var i=t(null==c?void 0:c.body);return e.apply(this,o).then(function(t){return i&&setTimeout(function(){u()},300),t}).catch(function(t){return Promise.reject(t)})}return e.apply(this,o)};var n=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(t,e){this._url=e;for(var o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];return n.call.apply(n,[this,t,e].concat(r))},XMLHttpRequest.prototype.send=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(this._url&&this._url.includes("/wp-json/wc/store/v1/batch")){var a=t(n[0]);this.addEventListener("loadend",function(){a&&setTimeout(function(){u()},300)})}return o.apply(this,n)}}(),window.jQuery&&window.jQuery.fn.on&&(window.jQuery(document.body).off("updated_cart_totals.woo_better"),window.jQuery(document.body).off("wc_fragments_refreshed.woo_better"),window.jQuery(document.body).on("updated_cart_totals.woo_better wc_fragments_refreshed.woo_better",function(){u()}));var s=function(){var t=document.createElement("div");return t.classList.add("woo-better-parent-container"),t}(),d=function(){var t=document.createElement("form");t.id="custom-postcode-form",t.style.marginTop="20px",t.style.padding="0px",C()&&"yes"===e.enable_search&&(t.style.display="none");var n=document.createElement("div");n.classList.add("woo-better-container-current-style");var o=document.createElement("div");o.classList.add("woo-better-input-button-group-current-style");var r=document.createElement("div");r.classList.add("woo-better-input-wrapper-current-style");var a=document.createElement("input");a.type="text",a.name="woo_better_custom_cart_postcode",a.placeholder=e.placeholder||"Digite o CEP",a.classList.add("woo-better-input-current-style"),a.autocomplete="postal-code",savedPostcodeValue&&(a.value=savedPostcodeValue);var i=e.inputStyles||{};Object.keys(i).forEach(function(t){a.style[t]=i[t]}),a.addEventListener("input",function(t){var e=t.target.value;if((e=e.replace(/[^\d-]/g,"")).includes("-")){var n,o=e.split("-");o.length>2||o[0].length>5?e=o[0].slice(0,5)+"-"+(null===(n=o[1])||void 0===n?void 0:n.slice(0,3)):o[0].length<5&&(e=o[0])}e.length>5&&!e.includes("-")&&(e=e.slice(0,5)+"-"+e.slice(5)),e.length>9&&(e=e.slice(0,9)),t.target.value=e});var s=document.createElement("img");s.src=e.icon,s.alt="Ícone de entrega",s.classList.add("woo-better-icon-current-style"),s.classList.add(e.iconColor||"black-icon"),r.appendChild(a),r.appendChild(s);var d=document.createElement("button");d.type="submit",d.textContent="CONSULTAR",d.classList.add("woo-better-button-current-style");var l=e.buttonStyles||{};Object.keys(l).forEach(function(t){d.style[t]=l[t]}),o.appendChild(r),o.appendChild(d),n.appendChild(o);var u=document.createElement("a");return u.href="https://buscacepinter.correios.com.br/app/endereco/index.php",u.textContent="Não sei meu CEP",u.classList.add("woo-better-link-current-style"),u.target="_blank",n.appendChild(u),t.appendChild(n),t.addEventListener("submit",function(t){t.preventDefault();var e=a.value.trim();if(/^\d{5}-\d{3}$/.test(e)){d.disabled=!0,a.disabled=!0;var n=_(e),o=document.querySelector(".woo-better-info-block");o&&!n&&(o.style.display="none"),c=d.textContent,d.textContent="";var r=document.createElement("span");r.classList.add("loading-icon"),d.appendChild(r),a.style.backgroundColor="#f0f0f0",a.style.cursor="not-allowed",d.style.backgroundColor="#ccc",d.style.cursor="not-allowed",b(e)}else alert("Por favor, insira um CEP válido no formato XXXXX-XXX.")}),t}(),l=C(),p={cart:{name:"****",quantity:e.quantity||1,currency_symbol:"R$",currency_minor_unit:2},shipping_rates:[{id:"**********",label:"***********",cost:12.34}],postcode:"12345-678"};if(l){var f=_(l);f?p={cart:f.cart,shipping_rates:f.shipping_rates,postcode:l}:p.postcode=l}var h=function(t,n,o,r){var a=document.createElement("div");a.classList.add("woo-better-info-block");var c=C(),i=t&&t.name&&"****"!==t.name;if(c&&"yes"===e.enable_search)if(i)a.style.display="block";else{var s=_(c);a.style.display=s?"block":"none"}else a.style.display="none";var d=document.createElement("div");d.classList.add("woo-better-content-block"),i?(d.style.display="block",d.classList.add("expanded")):d.style.display="none";var l=document.createElement("p"),u=document.createElement("img");u.src=e.details_icon.cart,u.alt="Produto",u.classList.add("woo-better-icon"),u.classList.add(e.iconColor||"black-icon"),l.appendChild(u);var p=document.createTextNode(" Carrinho");l.appendChild(p),l.classList.add("woo-better-cart-name");var m=document.createElement("p"),f=document.createElement("img");f.src=e.details_icon.quantity,f.alt="Quantidade",f.classList.add("woo-better-icon"),f.classList.add(e.iconColor||"black-icon"),m.appendChild(f);var h=document.createTextNode(" Quantidade: ".concat(t.quantity));m.appendChild(h),m.classList.add("woo-better-cart-quantity");var v=document.createElement("div");v.classList.add("woo-better-shipping-methods");var w=document.createElement("p"),S=document.createElement("img");S.src=e.icon,S.alt="Entrega",S.classList.add("woo-better-icon"),S.classList.add(e.iconColor||"black-icon"),w.appendChild(S);var k=document.createTextNode(" Métodos de Entrega:");w.appendChild(k),v.appendChild(w);var L=document.createElement("ul");L.classList.add("woo-better-shipping-list"),n.forEach(function(e){var n=document.createElement("li"),o=document.createElement("div");o.innerHTML=t.currency_symbol;var r=o.textContent||o.innerText||t.currency_symbol;n.innerHTML="<strong>".concat(r," ").concat(parseFloat(e.cost).toFixed(t.currency_minor_unit).replace(".",","),"</strong> - ").concat(e.label),L.appendChild(n)}),v.appendChild(L);var x=document.createElement("hr");x.classList.add("woo-better-separator");var E=document.createElement("div");E.classList.add("woo-better-update-section");var q=document.createElement("button");q.type="button",q.classList.add("woo-better-update-icon-container"),q.title="Clique para atualizar os dados de frete do carrinho";var T=document.createElement("img");T.src=e.update_icon.updates,T.alt="Atualizado",T.classList.add("woo-better-update-icon"),T.classList.add(e.iconColor||"black-icon"),q.addEventListener("click",function(){if(!T.classList.contains("spinning")){var t=C();t&&(T.classList.add("spinning"),q.classList.add("spinning-container"),g(),b(t,!0))}}),q.appendChild(T);var A=document.createElement("div");A.classList.add("woo-better-update-text-container");var O=document.createElement("p");O.classList.add("woo-better-update-date");var M=(new Date).toLocaleString("pt-BR");O.textContent="Atualizado em ".concat(M);var j=document.createElement("p");j.classList.add("woo-better-info-text"),j.textContent="Valor de frete calculado para todos os itens do carrinho.",A.appendChild(O),A.appendChild(j),E.appendChild(q),E.appendChild(A),d.appendChild(l),d.appendChild(m),d.appendChild(v),d.appendChild(x),d.appendChild(E);var H=function(t,e){var n=document.createElement("div");n.classList.add("woo-better-current-postcode-block");var o=document.createElement("div");o.classList.add("woo-better-toggle-postcode-wrapper");var r=document.createElement("button");r.type="button",y(r,"up","Esconder detalhes de entrega"),r.classList.add("woo-better-toggle-button");var a=document.createElement("span");a.innerHTML="<strong>CEP</strong>: ".concat(t),a.classList.add("woo-better-current-postcode-text"),r.addEventListener("click",function(){var t=document.querySelector(".woo-better-content-block");t&&(t.classList.contains("expanded")?(t.style.height="".concat(t.scrollHeight,"px"),requestAnimationFrame(function(){t.style.height="0"}),t.classList.remove("expanded"),r.innerHTML="",y(r,"down","Exibir detalhes de entrega")):(t.style.height="".concat(t.scrollHeight,"px"),t.classList.add("expanded"),r.innerHTML="",y(r,"up","Esconder detalhes de entrega"),t.addEventListener("transitionend",function(){t.classList.contains("expanded")&&(t.style.height="".concat(t.scrollHeight,"px"))},{once:!0})))}),o.appendChild(r),o.appendChild(a);var c=document.createElement("button");return c.type="button",c.textContent="Alterar",c.classList.add("woo-better-change-postcode-button"),c.addEventListener("click",function(){var t=document.querySelector(".woo-better-info-block");t&&(t.style.display="none"),e.style.display="block"}),n.appendChild(o),n.appendChild(c),n}(o,r);return a.appendChild(H),a.appendChild(d),a}(p.cart,p.shipping_rates,p.postcode,d);s.appendChild(d),s.appendChild(h),a.insertAdjacentElement("afterend",s),w=function(){var t=C();if(t){var o=document.querySelector(".woo-better-input-current-style");if(o&&(o.value=t,e.enable_search&&"yes"===e.enable_search)){var r=_(t);if(r){var a=document.querySelector(".woo-better-info-block");if(a){if(r.cart&&r.cart.name&&"****"!==r.cart.name){a.style.display="block";var c=a.querySelector(".woo-better-toggle-button");c&&(c.innerHTML="",y(c,"up","Esconder detalhes de entrega"));var i=a.querySelector(".woo-better-content-block");i&&(i.classList.add("expanded"),i.style.display="block",i.style.height="".concat(i.scrollHeight,"px"))}else{v(r,d,a,t),a.style.display="block";var s=a.querySelector(".woo-better-toggle-button");s&&(s.innerHTML="",y(s,"up","Esconder detalhes de entrega"));var l=a.querySelector(".woo-better-content-block");l&&(l.classList.add("expanded"),l.style.display="block",l.style.height="".concat(l.scrollHeight,"px"))}var u=a.querySelector(".woo-better-current-postcode-text");u&&(u.innerHTML="<strong>CEP</strong>: ".concat(t))}}else d.style.display="block","yes"===e.enable_search&&setTimeout(function(){var t=d.querySelector(".woo-better-button-current-style");t&&!t.disabled&&t.click()},100)}}n.disconnect()},(S=new FormData).append("action","wc_better_calc_get_nonce"),S.append("action_nonce","woo_better_register_cart_address"),fetch(e.ajaxurl,{method:"POST",body:S}).then(function(t){return t.json()}).then(function(t){t.success&&t.data&&t.data.nonce&&(i=t.data.nonce),w()}).catch(function(){w()}),n.disconnect()}}var w,S})}).observe(document.body,{childList:!0,subtree:!0})})})();