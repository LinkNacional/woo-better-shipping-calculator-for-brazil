document.addEventListener("DOMContentLoaded",function(){function e(){var e;document.getElementById("billing_document")&&((e=document.getElementById("billing_document"))&&!e.dataset.eventsSetup&&(e.addEventListener("input",function(){var e,t=this.value,o=t.replace(/\D/g,""),i="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";e="physical"===i?n(t):"legal"===i?l(t):o.length<=11?n(t):l(t),this.value=e;var d=function(e,t){return"physical"===t?"cpf":"legal"===t?"cnpj":e.length>=11&&e.length<=11?"cpf":e.length>=14||e.length>11?"cnpj":null}(o,i);!function(e,t){var n=document.getElementById("billing_persontype"),l=document.getElementById("billing_cpf"),o=document.getElementById("billing_cnpj");if("cpf"===t)n&&(n.value="physical"),l&&(l.value=e),o&&(o.value="");else if("cnpj"===t)n&&(n.value="legal"),l&&(l.value=""),o&&(o.value=e);else{var i="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";"physical"===i?(n&&(n.value="physical"),l&&(l.value=e),o&&(o.value="")):"legal"===i?(n&&(n.value="legal"),l&&(l.value=""),o&&(o.value=e)):e.replace(/\D/g,"").length<=11?(l&&(l.value=e),o&&(o.value="")):(l&&(l.value=""),o&&(o.value=e))}}(e,d),setTimeout(function(){!function(){var e=document.getElementById("billing_persontype"),t=document.getElementById("billing_cpf"),n=document.getElementById("billing_cnpj"),l=document.getElementById("billing_document");"undefined"!=typeof jQuery&&(e&&jQuery(e).trigger("change"),t&&jQuery(t).trigger("change"),n&&jQuery(n).trigger("change"),l&&jQuery(l).trigger("change"))}()},500)}),e.dataset.eventsSetup="true"),console.log("Campo billing_document encontrado e mÃ¡scara aplicada")),t()}function t(){var e=document.getElementById("place_order");e&&!e.dataset.validationSetup&&(e.addEventListener("click",function(e){var t,n=document.getElementById("billing_document");if(console.log(n),n){var l=n.value.trim(),o=l.replace(/\D/g,""),i="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both",d=!1;if(l.length&&("physical"===i?11===o.length&&(d=!0):"legal"===i?14===o.length&&(d=!0):"both"===i&&(11===o.length||14===o.length)&&(d=!0)),!d)return e.stopPropagation(),e.preventDefault(),(t=document.getElementById("billing_document_field"))&&(t.classList.remove("woocommerce-validated"),t.classList.add("woocommerce-invalid"),t.classList.add("woocommerce-invalid-required-field")),void n.scrollIntoView({behavior:"smooth",block:"center"});!function(){var e=document.getElementById("billing_document_field");e&&(e.classList.remove("woocommerce-invalid"),e.classList.remove("woocommerce-invalid-required-field"),e.classList.add("woocommerce-validated"))}()}}),e.dataset.validationSetup="true")}function n(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}function l(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}e(),new MutationObserver(function(n){n.forEach(function(n){"childList"===n.type&&n.addedNodes.forEach(function(n){n.nodeType===Node.ELEMENT_NODE&&(("billing_document"===n.id||n.querySelector&&n.querySelector("#billing_document"))&&setTimeout(e,100),("place_order"===n.id||n.querySelector&&n.querySelector("#place_order"))&&setTimeout(t,100))})})}).observe(document.body,{childList:!0,subtree:!0})});