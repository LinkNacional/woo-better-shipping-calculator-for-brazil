document.addEventListener("DOMContentLoaded",function(){function e(){var e;document.getElementById("billing_document")&&(e=document.getElementById("billing_document"))&&!e.dataset.eventsSetup&&(e.addEventListener("input",function(){var e,t=this.value,n=t.replace(/\D/g,""),l="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";e="physical"===l?c(t):"legal"===l?u(t):n.length<=11?c(t):u(t),this.value=e;var d=function(e,t){return"physical"===t?"cpf":"legal"===t?"cnpj":e.length>=11&&e.length<=11?"cpf":e.length>=14||e.length>11?"cnpj":null}(n,l);!function(e,t){var n=document.getElementById("billing_persontype"),l=document.getElementById("billing_cpf"),d=document.getElementById("billing_cnpj");if("cpf"===t)n&&(n.value="1"),l&&(l.value=e),d&&(d.value=""),i();else if("cnpj"===t)n&&(n.value="2"),l&&(l.value=""),d&&(d.value=e),14===e.replace(/\D/g,"").length?o():i();else{var r="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";if("physical"===r)n&&(n.value="1"),l&&(l.value=e),d&&(d.value=""),i();else if("legal"===r)n&&(n.value="2"),l&&(l.value=""),d&&(d.value=e),14===e.replace(/\D/g,"").length?o():i();else{var c=e.replace(/\D/g,"");c.length<=11?(l&&(l.value=e),d&&(d.value=""),i()):(l&&(l.value=""),d&&(d.value=e),14===c.length?o():i())}}}(e,d),setTimeout(function(){!function(){var e=document.getElementById("billing_persontype"),t=document.getElementById("billing_cpf"),n=document.getElementById("billing_cnpj"),l=document.getElementById("billing_document");"undefined"!=typeof jQuery&&(e&&jQuery(e).trigger("change"),t&&jQuery(t).trigger("change"),n&&jQuery(n).trigger("change"),l&&jQuery(l).trigger("change"))}()},500)}),e.dataset.eventsSetup="true"),d(),t(),l()}function t(){var e=document.getElementById("billing_country"),t=document.getElementById("billing_document_field");e&&t&&(n(e.value),e.addEventListener("change",function(){n(this.value),"undefined"!=typeof jQuery&&setTimeout(function(){jQuery("body").trigger("update_checkout")},100)}))}function n(e){var t=document.getElementById("billing_document_field");t&&("BR"!==e?(t.style.display="none",t.style.padding="0px",t.style.margin="0px",t.style.height="0px",t.style.overflow="hidden",function(){var e=document.getElementById("billing_document"),t=document.getElementById("billing_persontype"),n=document.getElementById("billing_cpf"),l=document.getElementById("billing_cnpj"),o=document.getElementById("billing_document_field");e&&(e.value="",e.setAttribute("value","")),t&&(t.value="",t.setAttribute("value","")),n&&(n.value="",n.setAttribute("value","")),l&&(l.value="",l.setAttribute("value","")),i(),o&&(o.classList.remove("woocommerce-validated"),o.classList.remove("woocommerce-invalid"),o.classList.remove("woocommerce-invalid-required-field"),o.querySelectorAll(".woocommerce-error, .woocommerce-message").forEach(function(e){return e.remove()})),[e,t,n,l].forEach(function(e){e&&(e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})))}),"undefined"!=typeof jQuery&&(setTimeout(function(){e&&jQuery(e).trigger("input").trigger("change"),t&&jQuery(t).trigger("change"),n&&jQuery(n).trigger("change"),l&&jQuery(l).trigger("change"),jQuery("body").trigger("update_checkout"),jQuery("body").trigger("wc_update_cart")},100),setTimeout(function(){jQuery("body").trigger("update_checkout")},300))}()):(t.style.display="",t.style.padding="",t.style.margin="",t.style.height="",t.style.overflow=""))}function l(){var e=document.getElementById("place_order");e&&!e.dataset.validationSetup&&(e.addEventListener("click",function(e){var t,n,l,i=document.getElementById("billing_document");if(i&&(n=document.getElementById("billing_country"),l=document.getElementById("billing_document_field"),n&&"BR"===n.value&&l&&"none"!==l.style.display)){var o=i.value.trim(),d=o.replace(/\D/g,""),c="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both",u=!1;if(o.length&&("physical"===c?11===d.length&&(u=!0):"legal"===c?14===d.length&&(u=!0):"both"===c&&(11===d.length||14===d.length)&&(u=!0)),!u)return e.stopPropagation(),e.preventDefault(),(t=document.getElementById("billing_document_field"))&&(t.classList.remove("woocommerce-validated"),t.classList.add("woocommerce-invalid"),t.classList.add("woocommerce-invalid-required-field")),void i.scrollIntoView({behavior:"smooth",block:"center"});r()}else r()}),e.dataset.validationSetup="true")}function i(){var e=document.getElementById("billing_company_field");if(e){e.style.display="none",e.style.padding="0px",e.style.margin="0px",e.style.height="0px",e.style.overflow="hidden";var t=document.getElementById("billing_company");t&&(t.value.trim()||(t.value="woonomedaempresa")),e.classList.remove("woocommerce-invalid"),e.classList.remove("woocommerce-invalid-required-field")}}function o(){var e=document.getElementById("billing_company_field");if(e){e.style.display="",e.style.padding="",e.style.margin="",e.style.height="",e.style.overflow="";var t=document.getElementById("billing_company");t&&"woonomedaempresa"===t.value&&(t.value="")}}function d(){var e=document.getElementById("billing_company");if(e&&!e.dataset.eventsSetup){var t=document.getElementById("billing_document"),n=!1;t&&t.value&&14===t.value.replace(/\D/g,"").length&&(n=!0),n?o():i(),e.dataset.eventsSetup="true"}}function r(){var e=document.getElementById("billing_document_field");e&&(e.classList.remove("woocommerce-invalid"),e.classList.remove("woocommerce-invalid-required-field"),e.classList.add("woocommerce-validated"))}function c(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}function u(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}e(),new MutationObserver(function(n){n.forEach(function(n){"childList"===n.type&&n.addedNodes.forEach(function(n){n.nodeType===Node.ELEMENT_NODE&&(("billing_document"===n.id||n.querySelector&&n.querySelector("#billing_document"))&&setTimeout(e,100),("billing_company"===n.id||n.querySelector&&n.querySelector("#billing_company"))&&setTimeout(d,100),("billing_country"===n.id||n.querySelector&&n.querySelector("#billing_country"))&&setTimeout(t,100),("place_order"===n.id||n.querySelector&&n.querySelector("#place_order"))&&setTimeout(l,100))})})}).observe(document.body,{childList:!0,subtree:!0})});