document.addEventListener("DOMContentLoaded",function(){function e(){var e;document.getElementById("billing_document")&&(e=document.getElementById("billing_document"))&&!e.dataset.eventsSetup&&(e.addEventListener("input",function(){var e,t=this.value,n=t.replace(/\D/g,""),o="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";e="physical"===o?a(t):"legal"===o?u(t):n.length<=11?a(t):u(t),this.value=e;var r=function(e,t){return"physical"===t?"cpf":"legal"===t?"cnpj":e.length>=11&&e.length<=11?"cpf":e.length>=14||e.length>11?"cnpj":null}(n,o);!function(e,t){var n=document.getElementById("billing_persontype"),o=document.getElementById("billing_cpf"),r=document.getElementById("billing_cnpj");if("cpf"===t)n&&(n.value="1"),o&&(o.value=e),r&&(r.value=""),d();else if("cnpj"===t)n&&(n.value="2"),o&&(o.value=""),r&&(r.value=e),14===e.replace(/\D/g,"").length?l():d();else{var c="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";if("physical"===c)n&&(n.value="1"),o&&(o.value=e),r&&(r.value=""),i();else if("legal"===c)n&&(n.value="2"),o&&(o.value=""),r&&(r.value=e),14===e.replace(/\D/g,"").length?l():d();else{var a=e.replace(/\D/g,"");a.length<=11?(o&&(o.value=e),r&&(r.value=""),i()):(o&&(o.value=""),r&&(r.value=e),14===a.length?l():d())}}}(e,r),setTimeout(function(){!function(){var e=document.getElementById("billing_persontype"),t=document.getElementById("billing_cpf"),n=document.getElementById("billing_cnpj"),o=document.getElementById("billing_document");"undefined"!=typeof jQuery&&(e&&jQuery(e).trigger("change"),t&&jQuery(t).trigger("change"),n&&jQuery(n).trigger("change"),o&&jQuery(o).trigger("change"))}()},500)}),e.dataset.eventsSetup="true"),r(),t(),o()}function t(){var e=document.getElementById("billing_country"),t=document.getElementById("billing_document_field");e&&t&&(n(e.value),e.addEventListener("change",function(){n(this.value),"undefined"!=typeof jQuery&&setTimeout(function(){jQuery("body").trigger("update_checkout")},100)}))}function n(e){var t=document.getElementById("billing_document_field");t&&("BR"!==e?(t.style.display="none",t.style.padding="0px",t.style.margin="0px",t.style.height="0px",t.style.overflow="hidden",function(){var e=document.getElementById("billing_document"),t=document.getElementById("billing_persontype"),n=document.getElementById("billing_cpf"),o=document.getElementById("billing_cnpj"),l=document.getElementById("billing_document_field");e&&(e.value="",e.setAttribute("value","")),t&&(t.value="",t.setAttribute("value","")),n&&(n.value="",n.setAttribute("value","")),o&&(o.value="",o.setAttribute("value","")),d(),l&&(l.classList.remove("woocommerce-validated"),l.classList.remove("woocommerce-invalid"),l.classList.remove("woocommerce-invalid-required-field"),l.querySelectorAll(".woocommerce-error, .woocommerce-message").forEach(function(e){return e.remove()})),[e,t,n,o].forEach(function(e){e&&(e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})))}),"undefined"!=typeof jQuery&&(setTimeout(function(){e&&jQuery(e).trigger("input").trigger("change"),t&&jQuery(t).trigger("change"),n&&jQuery(n).trigger("change"),o&&jQuery(o).trigger("change"),jQuery("body").trigger("update_checkout"),jQuery("body").trigger("wc_update_cart")},100),setTimeout(function(){jQuery("body").trigger("update_checkout")},300))}()):(t.style.display="",t.style.padding="",t.style.margin="",t.style.height="",t.style.overflow=""))}function o(){var e=document.getElementById("place_order");e&&!e.dataset.validationSetup&&(e.addEventListener("click",function(e){var t,n,o,l=document.getElementById("billing_document");if(l&&(n=document.getElementById("billing_country"),o=document.getElementById("billing_document_field"),n&&"BR"===n.value&&o&&"none"!==o.style.display)){var i=l.value.trim(),d=i.replace(/\D/g,""),r="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both",a=!1;if(i.length&&("physical"===r?11===d.length&&(a=!0):"legal"===r?14===d.length&&(a=!0):"both"===r&&(11===d.length||14===d.length)&&(a=!0)),!a)return e.stopPropagation(),e.preventDefault(),(t=document.getElementById("billing_document_field"))&&(t.classList.remove("woocommerce-validated"),t.classList.add("woocommerce-invalid"),t.classList.add("woocommerce-invalid-required-field")),void l.scrollIntoView({behavior:"smooth",block:"center"});c()}else c()}),e.dataset.validationSetup="true")}function l(){"dynamic"===("undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.company_field_behavior:"dynamic")&&function(){if("dynamic"===("undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.company_field_behavior:"dynamic")){var e=document.getElementById("billing_company_field");if(e){e.style.display="",e.style.padding="",e.style.margin="",e.style.height="",e.style.overflow="";var t=document.getElementById("billing_company");t&&"woonomedaempresa"===t.value&&(t.value="")}}}()}function i(){"dynamic"===("undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.company_field_behavior:"dynamic")&&function(){var e=document.getElementById("billing_company_field");if(e){e.style.display="none",e.style.padding="0px",e.style.margin="0px",e.style.height="0px",e.style.overflow="hidden";var t=document.getElementById("billing_company");t&&(t.value.trim()||(t.value="woonomedaempresa")),e.classList.remove("woocommerce-invalid"),e.classList.remove("woocommerce-invalid-required-field")}}()}function d(){if("dynamic"===("undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.company_field_behavior:"dynamic")){var e=document.getElementById("billing_company_field");if(e){e.style.display="none",e.style.padding="0px",e.style.margin="0px",e.style.height="0px",e.style.overflow="hidden";var t=document.getElementById("billing_company");t&&(t.value.trim()||(t.value="woonomedaempresa")),e.classList.remove("woocommerce-invalid"),e.classList.remove("woocommerce-invalid-required-field")}}}function r(){var e=document.getElementById("billing_company");if(e&&!e.dataset.eventsSetup){var t=document.getElementById("billing_document"),n=!1;t&&t.value&&14===t.value.replace(/\D/g,"").length&&(n=!0),n?l():d(),e.dataset.eventsSetup="true"}}function c(){var e=document.getElementById("billing_document_field");e&&(e.classList.remove("woocommerce-invalid"),e.classList.remove("woocommerce-invalid-required-field"),e.classList.add("woocommerce-validated"))}function a(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}function u(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}e(),new MutationObserver(function(n){n.forEach(function(n){"childList"===n.type&&n.addedNodes.forEach(function(n){n.nodeType===Node.ELEMENT_NODE&&(("billing_document"===n.id||n.querySelector&&n.querySelector("#billing_document"))&&setTimeout(e,100),("billing_company"===n.id||n.querySelector&&n.querySelector("#billing_company"))&&setTimeout(r,100),("billing_country"===n.id||n.querySelector&&n.querySelector("#billing_country"))&&setTimeout(t,100),("place_order"===n.id||n.querySelector&&n.querySelector("#place_order"))&&setTimeout(o,100))})})}).observe(document.body,{childList:!0,subtree:!0})});