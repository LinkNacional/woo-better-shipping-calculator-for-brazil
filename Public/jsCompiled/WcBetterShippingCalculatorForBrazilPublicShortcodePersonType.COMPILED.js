document.addEventListener("DOMContentLoaded",function(){function e(){var e;document.getElementById("billing_document")&&(e=document.getElementById("billing_document"))&&!e.dataset.eventsSetup&&(e.addEventListener("input",function(){var e,t=this.value,n=t.replace(/\D/g,""),l="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";e="physical"===l?i(t):"legal"===l?r(t):n.length<=11?i(t):r(t),this.value=e;var o=function(e,t){return"physical"===t?"cpf":"legal"===t?"cnpj":e.length>=11&&e.length<=11?"cpf":e.length>=14||e.length>11?"cnpj":null}(n,l);!function(e,t){var n=document.getElementById("billing_persontype"),l=document.getElementById("billing_cpf"),o=document.getElementById("billing_cnpj");if("cpf"===t)n&&(n.value="physical"),l&&(l.value=e),o&&(o.value="");else if("cnpj"===t)n&&(n.value="legal"),l&&(l.value=""),o&&(o.value=e);else{var i="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both";"physical"===i?(n&&(n.value="physical"),l&&(l.value=e),o&&(o.value="")):"legal"===i?(n&&(n.value="legal"),l&&(l.value=""),o&&(o.value=e)):e.replace(/\D/g,"").length<=11?(l&&(l.value=e),o&&(o.value="")):(l&&(l.value=""),o&&(o.value=e))}}(e,o),setTimeout(function(){!function(){var e=document.getElementById("billing_persontype"),t=document.getElementById("billing_cpf"),n=document.getElementById("billing_cnpj"),l=document.getElementById("billing_document");"undefined"!=typeof jQuery&&(e&&jQuery(e).trigger("change"),t&&jQuery(t).trigger("change"),n&&jQuery(n).trigger("change"),l&&jQuery(l).trigger("change"))}()},500)}),e.dataset.eventsSetup="true"),t(),l()}function t(){var e=document.getElementById("billing_country"),t=document.getElementById("billing_document_field");e&&t&&(n(e.value),e.addEventListener("change",function(){n(this.value),"undefined"!=typeof jQuery&&setTimeout(function(){jQuery("body").trigger("update_checkout")},100)}))}function n(e){var t=document.getElementById("billing_document_field");t&&("BR"!==e?(t.style.display="none",t.style.padding="0px",t.style.margin="0px",t.style.height="0px",t.style.overflow="hidden",function(){var e=document.getElementById("billing_document"),t=document.getElementById("billing_persontype"),n=document.getElementById("billing_cpf"),l=document.getElementById("billing_cnpj"),o=document.getElementById("billing_document_field");e&&(e.value="",e.setAttribute("value","")),t&&(t.value="",t.setAttribute("value","")),n&&(n.value="",n.setAttribute("value","")),l&&(l.value="",l.setAttribute("value","")),o&&(o.classList.remove("woocommerce-validated"),o.classList.remove("woocommerce-invalid"),o.classList.remove("woocommerce-invalid-required-field"),o.querySelectorAll(".woocommerce-error, .woocommerce-message").forEach(function(e){return e.remove()})),[e,t,n,l].forEach(function(e){e&&(e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})))}),"undefined"!=typeof jQuery&&(setTimeout(function(){e&&jQuery(e).trigger("input").trigger("change"),t&&jQuery(t).trigger("change"),n&&jQuery(n).trigger("change"),l&&jQuery(l).trigger("change"),jQuery("body").trigger("update_checkout"),jQuery("body").trigger("wc_update_cart")},100),setTimeout(function(){jQuery("body").trigger("update_checkout")},300))}()):(t.style.display="",t.style.padding="",t.style.margin="",t.style.height="",t.style.overflow=""))}function l(){var e=document.getElementById("place_order");e&&!e.dataset.validationSetup&&(e.addEventListener("click",function(e){var t,n,l,i=document.getElementById("billing_document");if(i&&(n=document.getElementById("billing_country"),l=document.getElementById("billing_document_field"),n&&"BR"===n.value&&l&&"none"!==l.style.display)){var r=i.value.trim(),d=r.replace(/\D/g,""),c="undefined"!=typeof WooBetterPersonTypeConfig?WooBetterPersonTypeConfig.person_type:"both",u=!1;if(r.length&&("physical"===c?11===d.length&&(u=!0):"legal"===c?14===d.length&&(u=!0):"both"===c&&(11===d.length||14===d.length)&&(u=!0)),!u)return e.stopPropagation(),e.preventDefault(),(t=document.getElementById("billing_document_field"))&&(t.classList.remove("woocommerce-validated"),t.classList.add("woocommerce-invalid"),t.classList.add("woocommerce-invalid-required-field")),void i.scrollIntoView({behavior:"smooth",block:"center"});o()}else o()}),e.dataset.validationSetup="true")}function o(){var e=document.getElementById("billing_document_field");e&&(e.classList.remove("woocommerce-invalid"),e.classList.remove("woocommerce-invalid-required-field"),e.classList.add("woocommerce-validated"))}function i(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}function r(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}e(),new MutationObserver(function(n){n.forEach(function(n){"childList"===n.type&&n.addedNodes.forEach(function(n){n.nodeType===Node.ELEMENT_NODE&&(("billing_document"===n.id||n.querySelector&&n.querySelector("#billing_document"))&&setTimeout(e,100),("billing_country"===n.id||n.querySelector&&n.querySelector("#billing_country"))&&setTimeout(t,100),("place_order"===n.id||n.querySelector&&n.querySelector("#place_order"))&&setTimeout(l,100))})})}).observe(document.body,{childList:!0,subtree:!0})});