!function(t){"use strict";var e=null,n=!1,o=null,r=0,i=0,a="",s=null,c="undefined"!=typeof wc_better_shipping_progress?wc_better_shipping_progress:{};c.initial_cart_total&&(r=parseFloat(c.initial_cart_total));var l="undefined"!=typeof wc_better_shipping_progress?parseFloat(wc_better_shipping_progress.min_free_shipping_value):0;function u(){s&&clearTimeout(s),s=setTimeout(function(){s=null;var t=("undefined"!=typeof wc_better_shipping_progress?wc_better_shipping_progress:{}).cart_api_url||"/wp-json/wc/store/v1/cart";fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){if(t&&t.totals&&t.totals.total_items){var e=parseInt(t.totals.total_items)/100;r=e}else r=d();f()}).catch(function(t){r=d(),f()})},300)}function d(){for(var t,e=null,n=0,o=[".wc-block-formatted-money-amount.wc-block-components-totals-item__value",'td[data-title="Subtotal"] .woocommerce-Price-amount.amount bdi',".cart-subtotal .woocommerce-Price-amount.amount bdi",".cart-subtotal .woocommerce-Price-amount.amount",".wc-block-components-totals-item__value .wc-block-formatted-money-amount",".order-total .woocommerce-Price-amount.amount bdi",".order-total .woocommerce-Price-amount.amount"];n<o.length;n++){var i=o[n];if((e=document.querySelector(i))&&e.textContent.trim())break}if(!e||!e.textContent.trim())return r||0;var a=(null===(t=window.wcSettings)||void 0===t?void 0:t.currency)||{},s=a.decimalSeparator||",",c=a.thousandSeparator||".",l="."===s||","===s?s:",",u="."===c||","===c?c:".",d=e.textContent.trim().replace(new RegExp("\\".concat(u),"g"),"").replace(new RegExp("\\".concat(l)),".").replace(/[^\d.-]/g,""),p=parseFloat(d)||0;return r=p,p}function p(){var t=r||d(),o=0,s="",c="undefined"!=typeof wc_better_shipping_progress?wc_better_shipping_progress:{},u=c.currency_symbol||"R$",p=c.min_free_shipping_success_message||"Parabéns! Você tem frete grátis!",m=c.min_free_shipping_message||"Falta(m) apenas mais {value} para obter FRETE GRÁTIS";if(m.includes("{value}")||(m="Falta(m) apenas mais {value} para obter FRETE GRÁTIS"),n)o=i,s="Carregando...";else{if(l<=0)o=100,s=p;else if(o=Math.min(t/l*100,100),t>=l)s=p;else{var f=u+(l-t).toFixed(2);s=m.replace("{value}",f)}i=o,a=s}var g=document.querySelector(".wc-better-shipping-progress-bar");if(g){if(e!==o||n){var h=g.querySelector(".wc-better-shipping-progress");h&&(n?(h.classList.add("loading"),h.style.background="linear-gradient(90deg, #ddd 0%, #aaa 50%, #ddd 100%)",h.style.backgroundSize="200% 100%",h.style.animation="loading-shimmer 1.5s ease-in-out infinite"):(h.classList.remove("loading"),h.style.width=o+"%",h.style.background="#4caf50",h.style.animation="none"));var _=g.querySelector(".wc-better-shipping-progress-text");_&&(_.textContent=s),e=o}}else{var y=document.createElement("div");y.className="wc-better-shipping-progress-bar",y.style.margin="15px 0px",y.style.padding="0px 16px";var b=document.createElement("div");b.style.background="#eee",b.style.borderRadius="4px",b.style.overflow="hidden",b.style.height="20px";var w=document.createElement("div");w.className="wc-better-shipping-progress",w.style.background="#4caf50",w.style.width=o+"%",w.style.height="100%",w.style.transition="width 0.5s ease-in-out",n&&(w.style.background="linear-gradient(90deg, #ddd 0%, #aaa 50%, #ddd 100%)",w.style.backgroundSize="200% 100%",w.style.animation="loading-shimmer 1.5s ease-in-out infinite"),b.appendChild(w);var v=document.createElement("div");if(v.className="wc-better-shipping-progress-text",v.style.marginTop="5px",v.style.fontSize="14px",v.textContent=s,y.appendChild(b),y.appendChild(v),!document.getElementById("wc-better-progress-styles")){var x=document.createElement("style");x.id="wc-better-progress-styles",x.textContent="\n\t\t\t\t\t@keyframes loading-shimmer {\n\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\tbackground-position: -200% 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\tbackground-position: 200% 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t.wc-better-shipping-progress.loading {\n\t\t\t\t\t\tbackground: linear-gradient(90deg, #ddd 0%, #aaa 50%, #ddd 100%) !important;\n\t\t\t\t\t\tbackground-size: 200% 100% !important;\n\t\t\t\t\t\tanimation: loading-shimmer 1.5s ease-in-out infinite !important;\n\t\t\t\t\t}\n\t\t\t\t",document.head.appendChild(x)}var k=document.querySelectorAll(".cart-collaterals .cart_totals h2");k.length>0&&(y.style.padding="0px",k.forEach(function(t){t.parentNode.insertBefore(y,t)})),(k=document.querySelectorAll(".woocommerce-checkout-review-order")).length>0&&(y.style.padding="0px",k.forEach(function(t){t.parentNode.insertBefore(y,t)})),(k=document.querySelectorAll(".wp-block-woocommerce-cart-order-summary-heading-block")).length>0&&(y.style.padding="0px",k.forEach(function(t){t.parentNode.insertBefore(y,t)})),(k=document.querySelectorAll(".wc-block-components-checkout-order-summary__title")).length>0&&(y.style.padding="0px 10px",k.forEach(function(t){t.parentNode.insertBefore(y,t)}))}}function m(){n=!0,o&&clearTimeout(o),p(),o=setTimeout(function(){f()},5e3)}function f(){n=!1,o&&(clearTimeout(o),o=null),setTimeout(function(){p()},200)}function g(){!function(){if(0===i&&""===a){var t=r,e=c.currency_symbol||"R$",n=c.min_free_shipping_success_message||"Parabéns! Você tem frete grátis!",o=c.min_free_shipping_message||"Falta(m) apenas mais {value} para obter FRETE GRÁTIS";if(o.includes("{value}")||(o="Falta(m) apenas mais {value} para obter FRETE GRÁTIS"),l<=0)i=100,a=n;else if(i=Math.min(t/l*100,100),t>=l)a=n;else{var s=e+(l-t).toFixed(2);a=o.replace("{value}",s)}}}(),function(){var t,e="undefined"!=typeof wc_better_shipping_progress?wc_better_shipping_progress:{},n=!e.has_cart_block,o=e.current_url||window.location.href;n?function(t){var e=XMLHttpRequest.prototype.open,n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(t,n){this._intercepted_url=n,this._intercepted_method=t;for(var o=arguments.length,r=new Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];return e.apply(this,[t,n].concat(r))},XMLHttpRequest.prototype.send=function(e){var o=this._intercepted_url,r=!1;return o&&o.includes(t)&&e&&("string"==typeof e?(e.includes("update_cart")||e.includes("remove_item"))&&(r=!0):e instanceof FormData&&(e.get("update_cart")||e.get("remove_item"))&&(r=!0)),o&&o.includes("remove_item")&&o.includes(t.split("?")[0])&&(r=!0),r&&(m(),this.addEventListener("readystatechange",function(){4===this.readyState&&setTimeout(function(){u()},500)})),n.apply(this,arguments)};var o=window.fetch;window.fetch=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1];if(i&&i.includes(t)&&a&&a.body){var s=!1;a.body instanceof FormData?(a.body.get("update_cart")||a.body.get("remove_item"))&&(s=!0):"string"==typeof a.body&&(a.body.includes("update_cart")||a.body.includes("remove_item"))&&(s=!0),s&&m()}return i&&i.includes("remove_item")&&i.includes(t.split("?")[0])&&m(),o.apply(this,n).then(function(e){return i&&(i.includes(t)||i.includes("remove_item"))&&setTimeout(function(){u()},500),e}).catch(function(e){throw i&&(i.includes(t)||i.includes("remove_item"))&&f(),e})}}(o):(t=window.fetch,window.fetch=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0];return n[1],i&&i.includes("/wp-json/wc/store/v1/batch")&&m(),t.apply(this,n).then(function(t){var e=t.clone();return i&&i.includes("/wp-json/wc/store/v1/batch")&&e.json().then(function(t){if(t&&t.responses&&t.responses[0]&&t.responses[0].body){var e=t.responses[0].body;if(e.totals&&e.totals.total_items){var n=parseInt(e.totals.total_items)/100;r=n,setTimeout(function(){f()},300)}}}).catch(function(t){f()}),t}).catch(function(t){throw i&&i.includes("/wp-json/wc/store/v1/batch")&&f(),t})})}(),p(),t(document).on("change","input.qty",function(){setTimeout(function(){p()},500)}),t(document).on("updated_cart_totals updated_checkout",function(){setTimeout(function(){p()},300)})}t(document).ready(function(){g()}),t(window).on("load",function(){setTimeout(g,500)})}(jQuery);