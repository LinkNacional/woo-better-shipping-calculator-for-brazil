!function(t){"use strict";var e=null,o=!1,n=null,r=0,a=0,i="",s="undefined"!=typeof wc_better_shipping_progress?wc_better_shipping_progress:{};s.initial_cart_total&&(r=parseFloat(s.initial_cart_total));var c="undefined"!=typeof wc_better_shipping_progress?parseFloat(wc_better_shipping_progress.min_free_shipping_value):0;function l(){for(var t,e=null,o=0,n=[".wc-block-formatted-money-amount.wc-block-components-totals-item__value",'td[data-title="Subtotal"] .woocommerce-Price-amount.amount bdi',".cart-subtotal .woocommerce-Price-amount.amount bdi",".cart-subtotal .woocommerce-Price-amount.amount",".wc-block-components-totals-item__value .wc-block-formatted-money-amount",".order-total .woocommerce-Price-amount.amount bdi",".order-total .woocommerce-Price-amount.amount"];o<n.length;o++){var a=n[o];if((e=document.querySelector(a))&&e.textContent.trim())break}if(!e||!e.textContent.trim())return r||0;var i=(null===(t=window.wcSettings)||void 0===t?void 0:t.currency)||{},s=i.decimalSeparator||",",c=i.thousandSeparator||".",l="."===s||","===s?s:",",p="."===c||","===c?c:".",d=e.textContent.trim().replace(new RegExp("\\".concat(p),"g"),"").replace(new RegExp("\\".concat(l)),".").replace(/[^\d.-]/g,""),u=parseFloat(d)||0;return r=u,u}function p(){var t=r||l(),n=0,s="",p="undefined"!=typeof wc_better_shipping_progress?wc_better_shipping_progress:{},d=p.currency_symbol||"R$",u=p.min_free_shipping_success_message||"Parabéns! Você tem frete grátis!",m="no"!==p.enable_progress_bar_value,g=p.min_free_shipping_message||"Falta(m) apenas mais {value} para obter FRETE GRÁTIS",f="";if(o)n=a,s="Carregando...",f=m?"Carregando...":"";else{if(c<=0)n=100,s=u,f=m?"Completo!":"";else if(n=Math.min(t/c*100,100),t>=c)s=u,f=m?"Completo!":"";else{var h=d+(c-t).toFixed(2);s=g.replace("{value}",h),f=m?"Falta "+h:""}a=n,i=s}var y=document.querySelector(".wc-better-shipping-progress-bar");if(y){if(e!==n||o){var w=y.querySelector(".wc-better-shipping-progress");w&&(o?(w.classList.add("loading"),w.style.background="linear-gradient(90deg, #ddd 0%, #aaa 50%, #ddd 100%)",w.style.backgroundSize="200% 100%",w.style.animation="loading-shimmer 1.5s ease-in-out infinite"):(w.classList.remove("loading"),w.style.width=n+"%",w.style.background="#4caf50",w.style.animation="none"));var b=y.querySelector(".wc-better-shipping-progress-inner-text");if(m)if(b)b.textContent=f;else{var _=y.querySelector(".wc-better-shipping-progress").parentNode,v=document.createElement("div");v.className="wc-better-shipping-progress-inner-text",v.style.position="absolute",v.style.top="50%",v.style.left="8px",v.style.transform="translateY(-50%)",v.style.fontSize="12px",v.style.fontWeight="bold",v.style.color="#fff",v.style.textShadow="1px 1px 2px rgba(0,0,0,0.5)",v.style.whiteSpace="nowrap",v.style.zIndex="10",v.textContent=f,_.appendChild(v)}else b&&b.remove();var x=y.querySelector(".wc-better-shipping-progress-text");x&&(x.textContent=s),e=n}}else{var S=document.createElement("div");S.className="wc-better-shipping-progress-bar",S.style.margin="15px 0px",S.style.padding="0px 16px";var k=document.createElement("div");k.style.background="#eee",k.style.borderRadius="4px",k.style.overflow="hidden",k.style.height="20px",k.style.position="relative";var C=document.createElement("div");if(C.className="wc-better-shipping-progress",C.style.background="#4caf50",C.style.width=n+"%",C.style.height="100%",C.style.transition="width 0.5s ease-in-out",o&&(C.style.background="linear-gradient(90deg, #ddd 0%, #aaa 50%, #ddd 100%)",C.style.backgroundSize="200% 100%",C.style.animation="loading-shimmer 1.5s ease-in-out infinite"),m){var E=document.createElement("div");E.className="wc-better-shipping-progress-inner-text",E.style.position="absolute",E.style.top="50%",E.style.left="8px",E.style.transform="translateY(-50%)",E.style.fontSize="12px",E.style.fontWeight="bold",E.style.color="#fff",E.style.textShadow="1px 1px 2px rgba(0,0,0,0.5)",E.style.whiteSpace="nowrap",E.style.zIndex="10",E.textContent=f,k.appendChild(C),k.appendChild(E)}else k.appendChild(C);var T=document.createElement("div");if(T.className="wc-better-shipping-progress-text",T.style.marginTop="5px",T.style.fontSize="14px",T.textContent=s,S.appendChild(k),S.appendChild(T),!document.getElementById("wc-better-progress-styles")){var q=document.createElement("style");q.id="wc-better-progress-styles",q.textContent="\n\t\t\t\t\t@keyframes loading-shimmer {\n\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\tbackground-position: -200% 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\tbackground-position: 200% 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t.wc-better-shipping-progress.loading {\n\t\t\t\t\t\tbackground: linear-gradient(90deg, #ddd 0%, #aaa 50%, #ddd 100%) !important;\n\t\t\t\t\t\tbackground-size: 200% 100% !important;\n\t\t\t\t\t\tanimation: loading-shimmer 1.5s ease-in-out infinite !important;\n\t\t\t\t\t}\n\t\t\t\t",document.head.appendChild(q)}var P=document.querySelectorAll(".cart-collaterals .cart_totals h2");P.length>0&&(S.style.padding="0px",P.forEach(function(t){t.parentNode.insertBefore(S,t)})),(P=document.querySelectorAll(".woocommerce-checkout-review-order")).length>0&&(S.style.padding="0px",P.forEach(function(t){t.parentNode.insertBefore(S,t)})),(P=document.querySelectorAll(".wp-block-woocommerce-cart-order-summary-heading-block")).length>0&&(S.style.padding="0px",P.forEach(function(t){t.parentNode.insertBefore(S,t)})),(P=document.querySelectorAll(".wc-block-components-checkout-order-summary__title")).length>0&&(S.style.padding="0px 10px",P.forEach(function(t){t.parentNode.insertBefore(S,t)}))}}function d(){o=!1,n&&(clearTimeout(n),n=null),setTimeout(function(){p()},200)}function u(){!function(){if(0===a&&""===i){var t=r,e=s.currency_symbol||"R$",o=s.min_free_shipping_success_message||"Parabéns! Você tem frete grátis!",n=s.min_free_shipping_message||"Falta(m) apenas mais {value} para obter FRETE GRÁTIS";if(c<=0)a=100,i=o;else if(a=Math.min(t/c*100,100),t>=c)i=o;else{var l=e+(c-t).toFixed(2);i=n.replace("{value}",l)}}}(),function(){var e,a,i="undefined"!=typeof wc_better_shipping_progress?wc_better_shipping_progress:{},s=!i.has_cart_block;i.current_url||window.location.href,s?(a=new MutationObserver(function(t){t.forEach(function(t){"childList"!==t.type&&"characterData"!==t.type||document.querySelectorAll(['td[data-title="Subtotal"] .woocommerce-Price-amount.amount bdi',".cart-subtotal .woocommerce-Price-amount.amount bdi",".order-total .woocommerce-Price-amount.amount bdi"].join(",")).length>0&&(clearTimeout(window.wcProgressBarTimeout),window.wcProgressBarTimeout=setTimeout(function(){r=l(),p()},500))})}),document.querySelectorAll(".cart, .checkout, .woocommerce-cart, .woocommerce-checkout").forEach(function(t){a.observe(t,{childList:!0,subtree:!0,characterData:!0})}),t(document).on("updated_cart_totals updated_checkout",function(){setTimeout(function(){r=l(),p()},300)})):(e=window.fetch,window.fetch=function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];var s=a[0];if(a[1],!s||!s.includes("/wp-json/wc/store/v1/batch")&&!s.includes("/wp-json/wc/store/v1/cart")||s.includes("braspag")||s.includes("cardinalcommerce"))return e.apply(this,a);var c=window.location.hostname,l="";try{l=s.startsWith("http")?new URL(s).hostname:c}catch(t){l=c}return l!==c?e.apply(this,a):(s.includes("/wp-json/wc/store/v1/batch")&&(o=!0,n&&clearTimeout(n),p(),n=setTimeout(function(){d()},5e3)),e.apply(this,a).then(function(t){var e=t.clone();return s.includes("/wp-json/wc/store/v1/batch")?e.json().then(function(t){if(t&&t.responses&&t.responses[0]&&t.responses[0].body){var e=t.responses[0].body;if(e.totals&&e.totals.total_items){var o=parseInt(e.totals.total_items)/100;r=o,setTimeout(function(){d()},300)}}}).catch(function(t){d()}):s.includes("/wp-json/wc/store/v1/cart")&&e.json().then(function(t){if(t&&t.totals&&t.totals.total_items){var e=parseInt(t.totals.total_items)/100;r=e,p()}}).catch(function(t){}),t}).catch(function(t){throw s.includes("/wp-json/wc/store/v1/batch")&&d(),t}))})}(),p(),t(document).on("change","input.qty",function(){setTimeout(function(){p()},500)}),t(document).on("updated_cart_totals updated_checkout",function(){setTimeout(function(){p()},300)})}t(document).ready(function(){u()}),t(window).on("load",function(){setTimeout(u,500)})}(jQuery);