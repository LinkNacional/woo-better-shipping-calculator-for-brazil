/*! For license information please see WcBetterShippingCalculatorForBrazilCheckoutPostcode.COMPILED.js.LICENSE.txt */
(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){var t,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function a(e,o,i,c){var a=o&&o.prototype instanceof s?o:s,l=Object.create(a.prototype);return n(l,"_invoke",function(e,n,o){var i,c,a,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,a=t,p.n=n,u}};function h(e,n){for(c=e,a=n,r=0;!f&&s&&!o&&r<l.length;r++){var o,i=l[r],h=p.p,b=i[2];e>3?(o=b===n)&&(a=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=e<2&&h<i[1])?(c=0,p.v=n,p.n=i[1]):h<b&&(o=e<3||i[0]>n||n>b)&&(i[4]=e,i[5]=n,p.n=b,c=0))}if(o||e>1)return u;throw f=!0,n}return function(o,l,b){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,b),c=l,a=b;(r=c<2?t:a)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,a)):p.n=a:p.v=a);try{if(s=2,i){if(c||(o="next"),r=i[o]){if(!(r=r.call(i,a)))throw TypeError("iterator result is not an object");if(!r.done)return r;a=r.value,c<2&&(c=0)}else 1===c&&(r=i.return)&&r.call(i),c<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((r=(f=p.n<0)?a:e.call(n,p))!==u)break}catch(e){i=t,c=1,a=e}finally{s=1}}return{value:r,done:f}}}(e,i,c),!0),l}var u={};function s(){}function l(){}function f(){}r=Object.getPrototypeOf;var p=[][i]?r(r([][i]())):(n(r={},i,function(){return this}),r),h=f.prototype=s.prototype=Object.create(p);function b(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,n(t,c,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=f,n(h,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,c,"GeneratorFunction"),n(h),n(h,c,"Generator"),n(h,i,function(){return this}),n(h,"toString",function(){return"[object Generator]"}),(e=function(){return{w:a,m:b}})()}function n(t,e,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}n=function(t,e,r,o){function c(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[e]=r:(c("next",0),c("throw",1),c("return",2))},n(t,e,r,o)}function r(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var c=t.apply(e,n);function a(t){r(c,o,i,a,u,"next",t)}function u(t){r(c,o,i,a,u,"throw",t)}a(void 0)})}}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}jQuery(function(t){var n=function(){return n=function e(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"shipping";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=t(n),this.checkboxLabel=t(r),this.context=o,this.addressData=null,this.init()},r=[{key:"init",value:function(){this.input.length&&this.input.on("input",this.handleInput.bind(this))}},{key:"handleInput",value:(s=o(e().m(function t(n){var r,o;return e().w(function(t){for(;;)switch(t.n){case 0:if(r=this.sanitizeCep(n.target.value),console.log(r),!this.isValidCep(r)){t.n=2;break}return t.n=1,this.fetchAddress(r);case 1:o=t.v,console.log(o),o&&(this.addressData=o,this.updateCheckboxLabel(o));case 2:return t.a(2)}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"sanitizeCep",value:function(t){return t.replace(/\D/g,"")}},{key:"isValidCep",value:function(t){return/^\d{8}$/.test(t)}},{key:"fetchAddress",value:(u=o(e().m(function t(n){var r;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromBrasilApi(n);case 1:if(r=t.v){t.n=3;break}return t.n=2,this.fetchFromViaCep(n);case 2:r=t.v;case 3:return t.a(2,r)}},t,this)})),function(t){return u.apply(this,arguments)})},{key:"fetchFromBrasilApi",value:(a=o(e().m(function t(n){var r,o;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("https://brasilapi.com.br/api/cep/v2/".concat(n));case 1:if((r=t.v).ok){t.n=2;break}return t.a(2,null);case 2:return t.n=3,r.json();case 3:if(!(o=t.v).cep){t.n=4;break}return t.a(2,{city:o.city,state:o.state,address:o.street,district:o.neighborhood||""});case 4:t.n=6;break;case 5:return t.p=5,t.v,t.a(2,null);case 6:return t.a(2,null)}},t,null,[[0,5]])})),function(t){return a.apply(this,arguments)})},{key:"fetchFromViaCep",value:(c=o(e().m(function t(n){var r,o;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("https://viacep.com.br/ws/".concat(n,"/json/"));case 1:if((r=t.v).ok){t.n=2;break}return t.a(2,null);case 2:return t.n=3,r.json();case 3:if(!(o=t.v).cep){t.n=4;break}return t.a(2,{city:o.localidade,state:o.uf,address:o.logradouro,district:o.bairro||""});case 4:t.n=6;break;case 5:return t.p=5,t.v,t.a(2,null);case 6:return t.a(2,null)}},t,null,[[0,5]])})),function(t){return c.apply(this,arguments)})},{key:"updateCheckboxLabel",value:function(t){if(console.log("entrei"),this.checkboxLabel.length){console.log("passei");var e="Usar o endereço: ".concat(t.address,", ").concat(t.city," - ").concat(t.district," - ").concat(t.state);this.checkboxLabel.find(".wc-block-components-checkbox__label").text(e)}}}],r&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,c,a,u,s}();new MutationObserver(function(){t(".wc-block-components-address-form__postcode").each(function(){var e=t(this),r=e.find("input");if(0!==r.length){var o=r.attr("id").replace("-postcode",""),i="woo-better-priority-"+o;if(!e.hasClass(i)){e.addClass(i);var c=t("#"+o+"-country");if(c.length){var a=c.parent();a.next().length?e.insertAfter(a):a.parent().append(e),function(e){var r=t("#"+e+"-postcode");if(0!==r.length){var o=r.parent(),i="wc-better-checkbox-"+e;if(!o.parent().find("#"+i).length){var c=t("<div>",{class:"wc-block-components-checkbox wc-block-checkout__use-address-for-shipping wc-better"}),a=t("<label>",{for:i}),u=t("<input>",{id:i,class:"wc-block-components-checkbox__input",type:"checkbox","aria-invalid":"false",checked:!1}),s=t('<svg class="wc-block-components-checkbox__mark" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 20"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path></svg>'),l=t("<span>",{class:"wc-block-components-checkbox__label",text:"Informe acima o código postal (CEP)"});a.append(u,s,l),c.append(a),o.next().length?c.insertAfter(o):o.parent().append(c),new n("#"+e+"-postcode","#"+i,e)}}}(o),e.css("margin-bottom","20px")}}}})}).observe(document.body,{childList:!0,subtree:!0})})})();