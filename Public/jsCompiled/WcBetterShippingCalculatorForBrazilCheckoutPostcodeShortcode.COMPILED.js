/*! For license information please see WcBetterShippingCalculatorForBrazilCheckoutPostcodeShortcode.COMPILED.js.LICENSE.txt */
(()=>{function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){var e,t,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(n,o,i,a){var c=o&&o.prototype instanceof l?o:l,u=Object.create(c.prototype);return r(u,"_invoke",function(n,r,o){var i,a,c,l=0,u=o||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,c=e,h.n=n,s}};function f(n,r){for(a=n,c=r,t=0;!d&&l&&!o&&t<u.length;t++){var o,i=u[t],f=h.p,p=i[2];n>3?(o=p===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=n<2&&f<i[1])?(a=0,h.v=r,h.n=i[1]):f<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,a=0))}if(o||n>1)return s;throw d=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),a=u,c=p;(t=a<2?e:c)||!d;){i||(a?a<3?(a>1&&(h.n=-1),f(a,c)):h.n=c:h.v=c);try{if(l=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==s)break}catch(t){i=e,a=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),u}var s={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var h=[][i]?t(t([][i]())):(r(t={},i,function(){return this}),t),f=d.prototype=l.prototype=Object.create(h);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,r(f,"constructor",d),r(d,"constructor",u),u.displayName="GeneratorFunction",r(d,a,"GeneratorFunction"),r(f),r(f,a,"Generator"),r(f,i,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:p}})()}function r(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}r=function(e,t,n,o){function a(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function c(e){o(a,r,i,c,s,"next",e)}function s(e){o(a,r,i,c,s,"throw",e)}c(void 0)})}}jQuery(function(e){window.moveCheckboxBelowPostcodeField=function(t){var n=e("#"+t+"_postcode_field"),r=e("#wc_better_calc_checkbox_"+t+"_field");if(n.length&&r.length){var o=e("#wc_better_calc_checkbox_"+t),i=o.length?o.closest("label"):e();i.length&&i.find("span.optional, .optional").remove(),n.next().is(r)||r.insertAfter(n);var a=e("#"+t+"_postcode");a.length&&8===a.val().replace(/\D/g,"").length&&a.trigger("input")}}}),jQuery(function(t){var r=!0;function o(e){var n=t("#"+e+"_country_field"),r=t("#"+e+"_postcode_field");n.length&&r.length&&(n.next().is(r)||r.insertAfter(n))}function a(e){var n=t("#wc_better_calc_checkbox_"+e+"_field"),r=t("#"+e+"_country");r.length&&n.length&&("BR"!==r.val()?n.hide():n.show())}"undefined"!=typeof wc_better_checkout_vars&&"no"===wc_better_checkout_vars.fill_checkout_address&&(r=!1);var c={billing:!1,shipping:!1};function s(e,n,r,o){var i=t("#wc_better_calc_checkbox_"+e),a=i.length?i.closest("label"):t();if(a.length){a.find("span.optional, .optional").remove();var c="";if("loading"===n)c="Carregando endereço...";else if("success"===n)if(o){var s=[];o.address&&s.push(o.address),o.city&&s.push(o.city),(o.district||o.neighborhood)&&s.push(o.district||o.neighborhood),o.state&&s.push(o.state),c="Endereço inserido: "+s.join(" - ")}else c="Endereço inserido: "+r;else if("preview"===n)if(o){var l=[];o.address&&l.push(o.address),o.city&&l.push(o.city),(o.district||o.neighborhood)&&l.push(o.district||o.neighborhood),o.state&&l.push(o.state),c="Usar o endereço: "+l.join(" - ")}else c="Usar o endereço: "+r;else c="notfound"===n?"Não encontramos o endereço, preencha os dados abaixo.":"Informe acima o código postal (CEP).";a.contents().filter(function(){return 3===this.nodeType||1===this.nodeType&&this.classList&&this.classList.contains("wc-better-label-fade")}).remove();var u=t('<span class="wc-better-label-fade" style="display:inline"></span>').text(c+" ");a.append(u)}}function l(e){return u.apply(this,arguments)}function u(){return(u=i(n().m(function e(t){var r,o,i,a,c,s,l,u;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("https://brasilapi.com.br/api/cep/v2/".concat(t));case 1:if(!(r=e.v).ok){e.n=3;break}return e.n=2,r.json();case 2:if(!(o=e.v).cep){e.n=3;break}return i={address:o.street||"",city:o.city||"",state:o.state||"",district:o.neighborhood||""},a=[i.address,i.city,i.state].filter(Boolean).join(" - "),e.a(2,[!0,a,i]);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,e.n=6,fetch("https://viacep.com.br/ws/".concat(t,"/json/"));case 6:if(!(c=e.v).ok){e.n=8;break}return e.n=7,c.json();case 7:if(!(s=e.v).cep){e.n=8;break}return l={address:s.logradouro||"",city:s.localidade||"",state:s.uf||"",district:s.bairro||""},u=[l.address,l.city,l.state].filter(Boolean).join(" - "),e.a(2,[!0,u,l]);case 8:e.n=10;break;case 9:e.p=9,e.v;case 10:return e.a(2,[!1,"",null])}},e,null,[[5,9],[0,4]])}))).apply(this,arguments)}function d(e,n){var r=n.postcode?String(n.postcode).replace(/\D/g,""):"";8===r.length&&(r=r.slice(0,5)+"-"+r.slice(5)),t("#"+e+"_postcode").val(r).trigger("change"),t("#"+e+"_address_1").val(n.address?n.address:"").trigger("change");var o=n.neighborhood?n.neighborhood:"";t("#"+e+"_neighborhood").length?t("#"+e+"_neighborhood").val(o).trigger("change"):""!==n.address&&""!==o&&t("#"+e+"_address_1").val(n.address+" - "+o).trigger("change"),t("#"+e+"_city").val(n.city?n.city:"").trigger("change"),t("#"+e+"_state").val(n.state?n.state:"").trigger("change");var i="billing"===e?"lkn_billing_number":"shipping"===e?"lkn_shipping_number":null,a="billing"===e?"lkn_billing_checkbox":"shipping"===e?"lkn_shipping_checkbox":null;i&&t("#"+i).length&&(t("#"+i).val("").prop("disabled",!1).trigger("change"),a&&t("#"+a).length&&t("#"+a).prop("checked",!1).trigger("change"))}new MutationObserver(function(){["billing","shipping"].forEach(function(e){if(o(e),moveCheckboxBelowPostcodeField(e),a(e),!c[e]){var n="billing"===e?window.wc_better_checkout_vars&&window.wc_better_checkout_vars.billing_number:window.wc_better_checkout_vars&&window.wc_better_checkout_vars.shipping_number,r=t("#"+e+"_address_1");if(r.length&&n){var i=r.val();if(i&&i.match(new RegExp("\\s*-?\\s*".concat(n,"\\s*$")))){var s=function(e,t){if(!e||!t)return e;var n=new RegExp("\\s*-?\\s*".concat(t,"\\s*$"));return e.replace(n,"").trim()}(i,n);r.val(s).trigger("change"),c[e]=!0}}else r.length&&!n&&(c[e]=!0)}})}).observe(document.body,{childList:!0,subtree:!0}),["billing","shipping"].forEach(function(e){o(e),moveCheckboxBelowPostcodeField(e),a(e);var n=t("#"+e+"_country");n.length&&n.on("change",function(){a(e)})}),["billing","shipping"].forEach(function(o){var a=t("#"+o+"_postcode"),c=t("#wc_better_calc_checkbox_"+o),u=null,h=!1,f=null;if(a.length&&!a.data("hasInputListener")){var p=function(e){if(c.length){c.prop("disabled",!!e);var t=c.closest("label");e?(c.addClass("wc-better-checkbox-disabled"),t.addClass("wc-better-checkbox-disabled-label")):(c.removeClass("wc-better-checkbox-disabled"),t.removeClass("wc-better-checkbox-disabled-label"))}},b=function(){h=!0,p(!0)},g=function(){h=!1,p(!1)},v=null,_="";a.on("input",function(){var r=i(n().m(function r(y){var w,m,k,x,j,O,P,E,S,T,I,C,A,B,D,F;return n().w(function(r){for(;;)switch(r.n){case 0:if(w=y.target.value,8===(m=w.replace(/\D/g,"")).length){r.n=1;break}return s(o,"default"),p(!0),u=null,v&&(clearInterval(v),v=null),_="",h=!1,c.prop("checked",!1),r.a(2);case 1:if(_!==w){r.n=2;break}return r.a(2);case 2:return _=w,s(o,"loading"),p(!0),v&&clearInterval(v),k=!0,v=setInterval(function(){var e=t("#wc_better_calc_checkbox_"+o),n=(e.length?e.closest("label"):t()).find("span.wc-better-label-fade");n.length&&(n.stop(!0,!0).fadeTo(250,k?.4:1),k=!k)},350),Date.now(),x=l(m),j=new Promise(function(e){return setTimeout(e,2e3)}),r.n=3,Promise.all([x,j]).then(function(e){return e[0]});case 3:if(O=r.v,P=e(O,3),E=P[0],S=P[1],T=P[2],v&&(clearInterval(v),v=null,I=t("#wc_better_calc_checkbox_"+o),C=I.length?I.closest("label"):t(),(A=C.find("span.wc-better-label-fade")).length&&A.stop(!0,!0).fadeTo(100,1)),_.replace(/\D/g,"")===m){r.n=4;break}return r.a(2);case 4:E?(s(o,"preview",S,T),u=T||null,h?p(!0):g(),c.prop("checked")&&(f&&JSON.stringify(f)===JSON.stringify(u)?b():(C=c.closest("label"),(A=C.find("span.wc-better-label-fade")).length&&A.stop(!0,!0).css("opacity",1).text("Inserindo Endereço...").show(),B={action:"wc_better_insert_address",address:u.address||"",city:u.city||"",state:u.state||"",district:u.district||"",postcode:a.val(),context:o},D=!1,F=new Promise(function(e,n){t.ajax({url:"undefined"!=typeof wc_better_checkout_vars&&wc_better_checkout_vars.ajax_url?wc_better_checkout_vars.ajax_url:"/wp-admin/admin-ajax.php",method:"POST",data:B,success:function(t){D=!0,e(t)},error:function(){D=!0,n()}})}),Promise.race([F,new Promise(function(e){return setTimeout(e,2e3)})]).then(i(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.n){case 0:if(D){e.n=1;break}return e.n=1,F;case 1:A.length&&u&&(t=[],u.address&&t.push(u.address),u.city&&t.push(u.city),u.district&&t.push(u.district),u.state&&t.push(u.state),r="Endereço inserido: "+t.join(" - "),A.stop(!0,!0).css("opacity",1).text(r).show(),s(o,"success","",u),d(o,{address:u.address,city:u.city,state:u.state,neighborhood:u.district||u.neighborhood||"",postcode:a.val()})),b(),f=JSON.parse(JSON.stringify(u));case 2:return e.a(2)}},e)}))).catch(function(){A.length&&A.stop(!0,!0).css("opacity",1).text("Erro ao inserir endereço.").show()})))):(s(o,"notfound"),p(!0),u=null,c.prop("checked",!1),h=!1);case 5:return r.a(2)}},r)}));return function(e){return r.apply(this,arguments)}}()),c.on("change",function(e){if(r&&e.target.checked&&u&&!h){var s=c.closest("label").find("span.wc-better-label-fade");s.length&&s.stop(!0,!0).css("opacity",1).text("Inserindo Endereço...").show();var l={action:"wc_better_insert_address",address:u.address||"",city:u.city||"",state:u.state||"",district:u.district||"",postcode:a.val(),context:o},f=!1,p=new Promise(function(e,n){t.ajax({url:"undefined"!=typeof wc_better_checkout_vars&&wc_better_checkout_vars.ajax_url?wc_better_checkout_vars.ajax_url:"/wp-admin/admin-ajax.php",method:"POST",data:l,success:function(t){f=!0,e(t)},error:function(){f=!0,n()}})});Promise.race([p,new Promise(function(e){return setTimeout(e,2e3)})]).then(i(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.n){case 0:if(f){e.n=1;break}return e.n=1,p;case 1:s.length&&u&&(t=[],u.address&&t.push(u.address),u.city&&t.push(u.city),u.district&&t.push(u.district),u.state&&t.push(u.state),r="Endereço inserido: "+t.join(" - "),s.stop(!0,!0).css("opacity",1).text(r).show()),u&&o&&d(o,{address:u.address,city:u.city,state:u.state,neighborhood:u.district||u.neighborhood||"",postcode:a.val()}),b();case 2:return e.a(2)}},e)}))).catch(function(){s.length&&s.stop(!0,!0).css("opacity",1).text("Erro ao inserir endereço.").show()})}});var y=a.val().replace(/\D/g,"");p(8!==y.length),a.data("hasInputListener",!0)}})})})();