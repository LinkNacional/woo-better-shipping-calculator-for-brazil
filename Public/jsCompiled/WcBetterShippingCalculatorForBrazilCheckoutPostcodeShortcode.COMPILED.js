/*! For license information please see WcBetterShippingCalculatorForBrazilCheckoutPostcodeShortcode.COMPILED.js.LICENSE.txt */
(()=>{function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,c,a,i=[],s=!0,l=!1;try{if(c=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=c.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(){var e,t,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(r,o,c,a){var i=o&&o.prototype instanceof l?o:l,d=Object.create(i.prototype);return n(d,"_invoke",function(r,n,o){var c,a,i,l=0,d=o||[],u=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return c=t,a=0,i=e,h.n=r,s}};function f(r,n){for(a=r,i=n,t=0;!u&&l&&!o&&t<d.length;t++){var o,c=d[t],f=h.p,p=c[2];r>3?(o=p===n)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=e):c[0]<=f&&((o=r<2&&f<c[1])?(a=0,h.v=n,h.n=c[1]):f<p&&(o=r<3||c[0]>n||n>p)&&(c[4]=r,c[5]=n,h.n=p,a=0))}if(o||r>1)return s;throw u=!0,n}return function(o,d,p){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&f(d,p),a=d,i=p;(t=a<2?e:i)||!u;){c||(a?a<3?(a>1&&(h.n=-1),f(a,i)):h.n=i:h.v=i);try{if(l=2,c){if(a||(o="next"),t=c[o]){if(!(t=t.call(c,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=c.return)&&t.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=e}else if((t=(u=h.n<0)?i:r.call(n,h))!==s)break}catch(t){c=e,a=1,i=t}finally{l=1}}return{value:t,done:u}}}(r,c,a),!0),d}var s={};function l(){}function d(){}function u(){}t=Object.getPrototypeOf;var h=[][c]?t(t([][c]())):(n(t={},c,function(){return this}),t),f=u.prototype=l.prototype=Object.create(h);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,n(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=u,n(f,"constructor",u),n(u,"constructor",d),d.displayName="GeneratorFunction",n(u,a,"GeneratorFunction"),n(f),n(f,a,"Generator"),n(f,c,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:p}})()}function n(e,t,r,o){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}n=function(e,t,r,o){function a(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?c?c(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},n(e,t,r,o)}function o(e,t,r,n,o,c,a){try{var i=e[c](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,c){var a=e.apply(t,r);function i(e){o(a,n,c,i,s,"next",e)}function s(e){o(a,n,c,i,s,"throw",e)}i(void 0)})}}jQuery(function(e){window.moveCheckboxBelowPostcodeField=function(t){var r=e("#"+t+"_postcode_field"),n=e("#wc_better_calc_checkbox_"+t+"_field");if(r.length&&n.length){var o=e("#wc_better_calc_checkbox_"+t),c=o.length?o.closest("label"):e();c.length&&c.find("span.optional, .optional").remove(),r.next().is(n)||n.insertAfter(r);var a=e("#"+t+"_postcode");a.length&&8===a.val().replace(/\D/g,"").length&&a.trigger("input")}}}),jQuery(function(t){var n=!0;function o(e){var r=t("#"+e+"_country_field"),n=t("#"+e+"_postcode_field");r.length&&n.length&&(r.next().is(n)||n.insertAfter(r))}function a(e){var r=t("#wc_better_calc_checkbox_"+e+"_field"),n=t("#"+e+"_country");n.length&&r.length&&("BR"!==n.val()?r.hide():r.show())}"undefined"!=typeof wc_better_checkout_vars_shortcode&&"no"===wc_better_checkout_vars_shortcode.fill_checkout_address&&(n=!1);var i={billing:!1,shipping:!1};function s(e,r,n,o){var c=t("#wc_better_calc_checkbox_"+e),a=c.length?c.closest("label"):t();if(a.length){a.find("span.optional, .optional").remove();var i="";if("loading"===r)i="Carregando endereço...";else if("success"===r)if(o){var s=[];o.address&&s.push(o.address),o.city&&s.push(o.city),document.getElementById("".concat(e,"_neighborhood"))||!o.district&&!o.neighborhood||s.push(o.district||o.neighborhood),o.state&&s.push(o.state),i="Endereço inserido: "+s.join(" - ")}else i="Endereço inserido: "+n;else if("preview"===r)if(o){var l=[];o.address&&l.push(o.address),o.city&&l.push(o.city),document.getElementById("".concat(e,"_neighborhood"))||!o.district&&!o.neighborhood||l.push(o.district||o.neighborhood),o.state&&l.push(o.state),i="Usar o endereço: "+l.join(" - ")}else i="Usar o endereço: "+n;else i="notfound"===r?"Não encontramos o endereço, preencha os dados abaixo.":"Informe acima o código postal (CEP).";a.contents().filter(function(){return 3===this.nodeType||1===this.nodeType&&this.classList&&this.classList.contains("wc-better-label-fade")}).remove();var d=t('<span class="wc-better-label-fade" style="display:inline"></span>').text(i+" ");a.append(d)}}function l(e){return d.apply(this,arguments)}function d(){return(d=c(r().m(function e(t){var n,o,c,a,i,s,l,d;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("https://brasilapi.com.br/api/cep/v2/".concat(t));case 1:if(!(n=e.v).ok){e.n=3;break}return e.n=2,n.json();case 2:if(!(o=e.v).cep){e.n=3;break}return c={address:o.street||"",city:o.city||"",state:o.state||"",district:o.neighborhood||""},a=[c.address,c.city,c.state].filter(Boolean).join(" - "),e.a(2,[!0,a,c]);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,e.n=6,fetch("https://viacep.com.br/ws/".concat(t,"/json/"));case 6:if(!(i=e.v).ok){e.n=8;break}return e.n=7,i.json();case 7:if(!(s=e.v).cep){e.n=8;break}return l={address:s.logradouro||"",city:s.localidade||"",state:s.uf||"",district:s.bairro||""},d=[l.address,l.city,l.state].filter(Boolean).join(" - "),e.a(2,[!0,d,l]);case 8:e.n=10;break;case 9:e.p=9,e.v;case 10:return e.a(2,[!1,"",null])}},e,null,[[5,9],[0,4]])}))).apply(this,arguments)}function u(e,r){var n=r.postcode?String(r.postcode).replace(/\D/g,""):"";8===n.length&&(n=n.slice(0,5)+"-"+n.slice(5)),t("#"+e+"_postcode").val(n).trigger("change"),t("#"+e+"_address_1").val(r.address?r.address:"").trigger("change");var o=r.neighborhood?r.neighborhood:"";document.getElementById(e+"_neighborhood")?t("#"+e+"_neighborhood").val(o).trigger("change"):""!==r.address&&""!==o&&t("#"+e+"_address_1").val(r.address+" - "+o).trigger("change"),t("#"+e+"_city").val(r.city?r.city:"").trigger("change"),t("#"+e+"_state").val(r.state?r.state:"").trigger("change");var c="billing"===e?"billing_number":"shipping"===e?"shipping_number":null,a="billing"===e?"lkn_billing_checkbox":"shipping"===e?"lkn_shipping_checkbox":null;if(c&&t("#"+c).length){var i=t("#"+c);i.val("").prop("disabled",!1).trigger("change"),i.closest(".form-row").removeAttr("style").css("opacity",""),a&&t("#"+a).length&&t("#"+a).prop("checked",!1).trigger("change")}}new MutationObserver(function(){["billing","shipping"].forEach(function(e){if(o(e),moveCheckboxBelowPostcodeField(e),a(e),!i[e]){var r="billing"===e?window.wc_better_checkout_vars_shortcode&&window.wc_better_checkout_vars_shortcode.billing_number:window.wc_better_checkout_vars_shortcode&&window.wc_better_checkout_vars_shortcode.shipping_number,n=t("#"+e+"_address_1");if(n.length&&r){var c=n.val();if(c&&c.match(new RegExp("\\s*-?\\s*".concat(r,"\\s*$")))){var s=function(e,t){if(!e||!t)return e;var r=new RegExp("\\s*-?\\s*".concat(t,"\\s*$"));return e.replace(r,"").trim()}(c,r);n.val(s).trigger("change"),i[e]=!0}}else n.length&&!r&&(i[e]=!0)}})}).observe(document.body,{childList:!0,subtree:!0}),["billing","shipping"].forEach(function(e){o(e),moveCheckboxBelowPostcodeField(e),a(e);var r=t("#"+e+"_country");r.length&&r.on("change",function(){a(e)})}),["billing","shipping"].forEach(function(o){var a=t("#"+o+"_postcode"),i=t("#wc_better_calc_checkbox_"+o),d=null,h=!1,f=null;if(a.length&&!a.data("hasInputListener")){var p=function(e){if(i.length){i.prop("disabled",!!e);var t=i.closest("label");e?(i.addClass("wc-better-checkbox-disabled"),t.addClass("wc-better-checkbox-disabled-label")):(i.removeClass("wc-better-checkbox-disabled"),t.removeClass("wc-better-checkbox-disabled-label"))}},b=function(){h=!0,p(!0)},_=function(){h=!1,p(!1)},g=null,v="";a.on("input",function(){var n=c(r().m(function n(y){var w,m,k,x,j,E,O,P,S,T,I,C,A,B,D,F;return r().w(function(n){for(;;)switch(n.n){case 0:if(w=y.target.value,8===(m=w.replace(/\D/g,"")).length){n.n=1;break}return s(o,"default"),p(!0),d=null,g&&(clearInterval(g),g=null),v="",h=!1,i.prop("checked",!1),n.a(2);case 1:if(v!==w){n.n=2;break}return n.a(2);case 2:return v=w,s(o,"loading"),p(!0),g&&clearInterval(g),k=!0,g=setInterval(function(){var e=t("#wc_better_calc_checkbox_"+o),r=(e.length?e.closest("label"):t()).find("span.wc-better-label-fade");r.length&&(r.stop(!0,!0).fadeTo(250,k?.4:1),k=!k)},350),Date.now(),x=l(m),j=new Promise(function(e){return setTimeout(e,2e3)}),n.n=3,Promise.all([x,j]).then(function(e){return e[0]});case 3:if(E=n.v,O=e(E,3),P=O[0],S=O[1],T=O[2],g&&(clearInterval(g),g=null,I=t("#wc_better_calc_checkbox_"+o),C=I.length?I.closest("label"):t(),(A=C.find("span.wc-better-label-fade")).length&&A.stop(!0,!0).fadeTo(100,1)),v.replace(/\D/g,"")===m){n.n=4;break}return n.a(2);case 4:P?(s(o,"preview",S,T),d=T||null,h?p(!0):_(),i.prop("checked")&&(f&&JSON.stringify(f)===JSON.stringify(d)?b():(C=i.closest("label"),(A=C.find("span.wc-better-label-fade")).length&&A.stop(!0,!0).css("opacity",1).text("Inserindo Endereço...").show(),B={action:"wc_better_insert_address",address:d.address||"",city:d.city||"",state:d.state||"",district:d.district||"",postcode:a.val(),context:o,nonce:"undefined"!=typeof wc_better_checkout_vars_shortcode?wc_better_checkout_vars_shortcode.nonce:""},D=!1,F=new Promise(function(e,r){t.ajax({url:"undefined"!=typeof wc_better_checkout_vars_shortcode&&wc_better_checkout_vars_shortcode.ajax_url?wc_better_checkout_vars_shortcode.ajax_url:"/wp-admin/admin-ajax.php",method:"POST",data:B,success:function(t){D=!0,e(t)},error:function(){D=!0,r()}})}),Promise.race([F,new Promise(function(e){return setTimeout(e,2e3)})]).then(c(r().m(function e(){var t,n;return r().w(function(e){for(;;)switch(e.n){case 0:if(D){e.n=1;break}return e.n=1,F;case 1:A.length&&d&&(t=[],d.address&&t.push(d.address),d.city&&t.push(d.city),d.district&&t.push(d.district),d.state&&t.push(d.state),n="Endereço inserido: "+t.join(" - "),A.stop(!0,!0).css("opacity",1).text(n).show(),s(o,"success","",d),u(o,{address:d.address,city:d.city,state:d.state,neighborhood:d.district||d.neighborhood||"",postcode:a.val()})),b(),f=JSON.parse(JSON.stringify(d));case 2:return e.a(2)}},e)}))).catch(function(){A.length&&A.stop(!0,!0).css("opacity",1).text("Erro ao inserir endereço.").show()})))):(s(o,"notfound"),p(!0),d=null,i.prop("checked",!1),h=!1);case 5:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()),i.on("change",function(e){if(n&&e.target.checked&&d&&!h){var s=i.closest("label").find("span.wc-better-label-fade");s.length&&s.stop(!0,!0).css("opacity",1).text("Inserindo Endereço...").show();var l={action:"wc_better_insert_address",address:d.address||"",city:d.city||"",state:d.state||"",district:d.district||"",postcode:a.val(),context:o,nonce:"undefined"!=typeof wc_better_checkout_vars_shortcode?wc_better_checkout_vars_shortcode.nonce:""},f=!1,p=new Promise(function(e,r){t.ajax({url:"undefined"!=typeof wc_better_checkout_vars_shortcode&&wc_better_checkout_vars_shortcode.ajax_url?wc_better_checkout_vars_shortcode.ajax_url:"/wp-admin/admin-ajax.php",method:"POST",data:l,success:function(t){f=!0,e(t)},error:function(){f=!0,r()}})});Promise.race([p,new Promise(function(e){return setTimeout(e,2e3)})]).then(c(r().m(function e(){var t,n;return r().w(function(e){for(;;)switch(e.n){case 0:if(f){e.n=1;break}return e.n=1,p;case 1:s.length&&d&&(t=[],d.address&&t.push(d.address),d.city&&t.push(d.city),d.district&&t.push(d.district),d.state&&t.push(d.state),n="Endereço inserido: "+t.join(" - "),s.stop(!0,!0).css("opacity",1).text(n).show()),d&&o&&u(o,{address:d.address,city:d.city,state:d.state,neighborhood:d.district||d.neighborhood||"",postcode:a.val()}),b();case 2:return e.a(2)}},e)}))).catch(function(){s.length&&s.stop(!0,!0).css("opacity",1).text("Erro ao inserir endereço.").show()})}});var y=a.val().replace(/\D/g,"");p(8!==y.length),a.data("hasInputListener",!0)}})})})();