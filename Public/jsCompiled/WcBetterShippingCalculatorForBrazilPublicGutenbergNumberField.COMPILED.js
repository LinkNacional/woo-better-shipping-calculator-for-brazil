document.addEventListener("DOMContentLoaded",function(){var e=!1,t=!1,n=!1,o=null,i=0;function r(e){var n=document.querySelector('span.wc-block-components-address-card__edit[aria-controls="billing"]'),o=document.getElementById("billing-number");if("true"!=n.getAttribute("aria-expanded")&&n.click(),"true"==n.getAttribute("aria-expanded")&&!o){var i=e.querySelector(".wc-block-components-text-input.wc-block-components-address-form__address_1");if(t=!0,i){var r=document.createElement("div");r.className="wc-block-components-text-input wc-block-components-address-form__number wc-better-billing-number";var a=document.createElement("input");a.type="text",a.id="billing-number",a.setAttribute("autocomplete","give-number"),a.setAttribute("aria-label","Número"),a.setAttribute("required",""),a.setAttribute("aria-invalid","false"),a.setAttribute("autocapitalize","sentences");var c="",l="";if("undefined"!=typeof WooBetterNumberData&&WooBetterNumberData.billing_number)c=WooBetterNumberData.billing_number;else{var s=i.querySelector("input");if(s&&s.value){var d=s.value.trim(),u=d.match(/[–-]\s*(\d+|S\/N)\s*$/);if(u){c=l=u[1];var b=d.replace(/\s*[–-]\s*(\d+|S\/N)\s*$/,"").trim();b!==d&&(Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(s,b),s.dispatchEvent(new Event("input",{bubbles:!0})))}}}a.value=c,""!==c&&r.classList.add("is-active"),l&&window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate&&setTimeout(function(){var e={woo_better_shipping_number:"",woo_better_billing_number:l},t=document.getElementById("shipping-number");e.woo_better_shipping_number=t?t.value:l,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:e})},100);var p=document.createElement("input");p.id="wc-billing-better-checkbox",p.className="wc-block-components-checkbox__input",p.type="checkbox",p.setAttribute("aria-invalid","false"),"S/N"===c&&(p.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),a.addEventListener("input",function(){var e=a.value.trim();if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:"",woo_better_billing_number:e},n=document.getElementById("shipping-number");t.woo_better_shipping_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var m=document.createElement("label");m.setAttribute("for","billing-number"),m.textContent="Número",r.appendChild(a),r.appendChild(m);var w=document.createElement("div");w.className="wc-block-components-validation-error wc-better-billing",w.setAttribute("role","alert"),w.style.display="none";var v=document.createElement("p");v.id="validate-error-billing_number";var h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("xmlns","http://www.w3.org/2000/svg"),h.setAttribute("viewBox","-2 -2 24 24"),h.setAttribute("width","24"),h.setAttribute("height","24"),h.setAttribute("aria-hidden","true"),h.setAttribute("focusable","false");var g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("d","M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"),h.appendChild(g);var _=document.createElement("span");_.textContent="Por favor, insira um número válido.",v.appendChild(h),v.appendChild(_),w.appendChild(v),r.appendChild(w);var k=document.createElement("div");k.className="wc-block-components-checkbox wc-block-checkout__use-address-for-billing wc-better";var y=document.createElement("label");y.setAttribute("for","wc-billing-better-checkbox");var f=document.createElement("input");f.id="wc-billing-better-checkbox",f.className="wc-block-components-checkbox__input",f.type="checkbox",f.setAttribute("aria-invalid","false"),"S/N"===c&&(f.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),f.addEventListener("change",function(){var e=this.checked?"S/N":"";if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:"",woo_better_billing_number:e},n=document.getElementById("shipping-number");t.woo_better_shipping_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.setAttribute("class","wc-block-components-checkbox__mark"),E.setAttribute("aria-hidden","true"),E.setAttribute("xmlns","http://www.w3.org/2000/svg"),E.setAttribute("viewBox","0 0 24 20");var C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),E.appendChild(C);var A=document.createElement("span");A.className="wc-block-components-checkbox__label",A.textContent="Sem número (S/N)",y.appendChild(f),y.appendChild(E),y.appendChild(A),k.appendChild(y),i.insertAdjacentElement("afterend",k),i.insertAdjacentElement("afterend",r),a.addEventListener("focus",function(){r.classList.add("is-active")}),a.addEventListener("blur",function(){a.value||r.classList.remove("is-active")});var x=document.getElementById("wc-billing-better-checkbox"),L=document.getElementById("billing-number");x.addEventListener("change",function(){var e=document.querySelector(".wc-better-billing-number"),t=document.querySelector(".wc-block-components-validation-error.wc-better-billing");this.checked?(L.disabled=!0,L.setAttribute("value","S/N"),L.value="S/N",L.style.backgroundColor="#e0e0e0",L.style.color="#808080",e&&e.classList.add("is-active"),t&&(t.style.display="none")):(L.disabled=!1,L.setAttribute("value",""),L.value="",L.style.backgroundColor="",L.style.color="",e&&e.classList.remove("is-active"))}),L.addEventListener("input",function(){var e=document.querySelector(".wc-block-components-validation-error.wc-better-billing");L&&(L.value.trim().length>0?e.style.display="none":e.style.display="block")})}}}function a(){if("undefined"!=typeof wp&&wp.data&&wp.data.dispatch)try{var e=wp.data.dispatch;if(e("wc/store/checkout")){var t=e("wc/store/checkout");if(t.setExtensionData){var n=document.getElementById("shipping-number"),o=document.getElementById("billing-number"),i={woo_better_shipping_number:n?n.value:"",woo_better_billing_number:o?o.value:""};t.setExtensionData("woo_better_number_validation",i)}}}catch(e){}}console.log("chamouuuu"),new MutationObserver(function(a){var c=document.querySelector("#shipping"),l=document.querySelector("#billing");if(c||(e=!1,i=0),l||(t=!1),c&&!e){e=!0;var s=setInterval(function(){if(i>20)clearInterval(s);else{var e=document.querySelector('span.wc-block-components-address-card__edit[aria-controls="shipping"]');if("true"!=e.getAttribute("aria-expanded")&&e.click(),"true"==e.getAttribute("aria-expanded")){clearInterval(s);var n=c.querySelector(".wc-block-components-text-input.wc-block-components-address-form__address_1");if(n){var o=document.createElement("div");o.className="wc-block-components-text-input wc-block-components-address-form__number wc-better-shipping-number";var a=document.createElement("input");a.type="text",a.id="shipping-number",a.setAttribute("autocomplete","give-number"),a.setAttribute("aria-label","Número"),a.setAttribute("required",""),a.setAttribute("aria-invalid","false"),a.setAttribute("autocapitalize","sentences");var l="",d="";if("undefined"!=typeof WooBetterNumberData&&WooBetterNumberData.shipping_number)l=WooBetterNumberData.shipping_number;else{var u=n.querySelector("input");if(u&&u.value){var b=u.value.trim(),p=b.match(/[–-]\s*(\d+|S\/N)\s*$/);if(p){l=d=p[1];var m=b.replace(/\s*[–-]\s*(\d+|S\/N)\s*$/,"").trim();m!==b&&(Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(u,m),u.dispatchEvent(new Event("input",{bubbles:!0})))}}}a.value=l,""!==l&&o.classList.add("is-active"),d&&window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate&&setTimeout(function(){var e={woo_better_shipping_number:d,woo_better_billing_number:""},t=document.getElementById("billing-number");e.woo_better_billing_number=t?t.value:d,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:e})},100);var w=document.createElement("input");w.id="wc-shipping-better-checkbox",w.className="wc-block-components-checkbox__input",w.type="checkbox",w.setAttribute("aria-invalid","false"),"S/N"===l&&(w.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),a.addEventListener("input",function(){var e=a.value.trim();if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:e,woo_better_billing_number:""},n=document.getElementById("billing-number");t.woo_better_billing_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var v=document.createElement("label");v.setAttribute("for","shipping-number"),v.textContent="Número",o.appendChild(a),o.appendChild(v);var h=document.createElement("div");h.className="wc-block-components-validation-error wc-better-shipping",h.setAttribute("role","alert"),h.style.display="none";var g=document.createElement("p");g.id="validate-error-shipping_number";var _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.setAttribute("xmlns","http://www.w3.org/2000/svg"),_.setAttribute("viewBox","-2 -2 24 24"),_.setAttribute("width","24"),_.setAttribute("height","24"),_.setAttribute("aria-hidden","true"),_.setAttribute("focusable","false");var k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d","M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"),_.appendChild(k);var y=document.createElement("span");y.textContent="Por favor, insira um número válido.",g.appendChild(_),g.appendChild(y),h.appendChild(g),o.appendChild(h);var f=document.createElement("div");f.className="wc-block-components-checkbox wc-block-checkout__use-address-for-shipping wc-better";var E=document.createElement("label");E.setAttribute("for","wc-shipping-better-checkbox");var C=document.createElement("input");C.id="wc-shipping-better-checkbox",C.className="wc-block-components-checkbox__input",C.type="checkbox",C.setAttribute("aria-invalid","false"),"S/N"===l&&(C.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),C.addEventListener("change",function(){var e=this.checked?"S/N":"";if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:e,woo_better_billing_number:""},n=document.getElementById("billing-number");t.woo_better_billing_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var A=document.createElementNS("http://www.w3.org/2000/svg","svg");A.setAttribute("class","wc-block-components-checkbox__mark"),A.setAttribute("aria-hidden","true"),A.setAttribute("xmlns","http://www.w3.org/2000/svg"),A.setAttribute("viewBox","0 0 24 20");var x=document.createElementNS("http://www.w3.org/2000/svg","path");x.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),A.appendChild(x);var L=document.createElement("span");L.className="wc-block-components-checkbox__label",L.textContent="Sem número (S/N)",E.appendChild(C),E.appendChild(A),E.appendChild(L),f.appendChild(E),n.insertAdjacentElement("afterend",f),n.insertAdjacentElement("afterend",o),a.addEventListener("focus",function(){o.classList.add("is-active")}),a.addEventListener("blur",function(){a.value||o.classList.remove("is-active")})}var N=document.querySelector(".wc-block-components-checkbox.wc-block-checkout__use-address-for-billing"),S=N?N.querySelector("input"):null;S&&S.addEventListener("change",function(){S.checked||(t=!1,r(document.querySelector("#billing")))})}i++}},5)}l&&!t&&r(l);var d=document.querySelector(".wc-block-checkout__actions_row");if(d&&(o=d.querySelector("button")),o&&!n){n=!0;var u="",b="",p=setInterval(function(){var e=document.getElementById("wc-shipping-better-checkbox");u=document.getElementById("shipping-number"),b=document.querySelector(".wc-block-components-validation-error.wc-better-shipping");var t=document.querySelector(".wc-better-shipping-number");e&&(clearInterval(p),e.addEventListener("change",function(){this.checked?(u.disabled=!0,u.setAttribute("value","S/N"),u.value="S/N",u.style.backgroundColor="#e0e0e0",u.style.color="#808080",t&&t.classList.add("is-active"),b&&(b.style.display="none")):(u.disabled=!1,u.setAttribute("value",""),u.value="",u.style.backgroundColor="",u.style.color="",t&&t.classList.remove("is-active"))}),u&&b&&u.addEventListener("input",function(){u.value.trim().length>0?b.style.display="none":b.style.display="block"}))},10);o&&o.addEventListener("click",function(e){var t=document.getElementById("shipping-number"),n=document.getElementById("billing-number"),o=document.querySelector(".wc-block-components-validation-error.wc-better-shipping"),i=document.querySelector(".wc-block-components-validation-error.wc-better-billing");t&&!t.value.trim().length?(e.stopPropagation(),e.preventDefault(),o.style.display="block",t.scrollIntoView({behavior:"smooth",block:"center"})):n&&!n.value.trim().length&&(e.stopPropagation(),e.preventDefault(),i.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}))})}}).observe(document.body,{childList:!0,subtree:!0}),function(){if("undefined"!=typeof wp&&wp.data&&wp.data.dispatch)try{var e=wp.data,t=e.dispatch,n=e.select;if(t("wc/store/checkout")){var o=t("wc/store/checkout");if(o.setExtensionData){var i=(n("wc/store/checkout").getExtensionData()||{}).woo_better_number_validation||{};i.hasOwnProperty("woo_better_shipping_number")||(i.woo_better_shipping_number=""),i.hasOwnProperty("woo_better_billing_number")||(i.woo_better_billing_number=""),o.setExtensionData("woo_better_number_validation",i)}}}catch(e){}}(),new MutationObserver(function(e){var t=!1;e.forEach(function(e){"childList"===e.type&&e.addedNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&((e.querySelectorAll?e.querySelectorAll("#shipping-number, #billing-number"):[]).length>0||e.id&&("shipping-number"===e.id||"billing-number"===e.id))&&(t=!0)})}),t&&setTimeout(function(){a();var e=document.getElementById("shipping-number"),t=document.getElementById("billing-number");e&&!e.dataset.storeApiListener&&(e.addEventListener("input",a),e.addEventListener("change",a),e.dataset.storeApiListener="true"),t&&!t.dataset.storeApiListener&&(t.addEventListener("input",a),t.addEventListener("change",a),t.dataset.storeApiListener="true")},100)}).observe(document.body,{childList:!0,subtree:!0}),setTimeout(function(){a();var e=document.getElementById("shipping-number"),t=document.getElementById("billing-number");e&&!e.dataset.storeApiListener&&(e.addEventListener("input",a),e.addEventListener("change",a),e.dataset.storeApiListener="true"),t&&!t.dataset.storeApiListener&&(t.addEventListener("input",a),t.addEventListener("change",a),t.dataset.storeApiListener="true")},500)});