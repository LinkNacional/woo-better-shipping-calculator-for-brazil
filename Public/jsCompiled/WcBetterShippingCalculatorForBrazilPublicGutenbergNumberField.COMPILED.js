document.addEventListener("DOMContentLoaded",function(){var e=!1,t=!1,n=!1,r=null,i=0;function o(e){var n=document.querySelector('span.wc-block-components-address-card__edit[aria-controls="billing"]'),r=document.getElementById("billing-number");if("true"!=n.getAttribute("aria-expanded")&&n.click(),"true"==n.getAttribute("aria-expanded")&&!r){var i=e.querySelector(".wc-block-components-text-input.wc-block-components-address-form__address_1");if(t=!0,i){var o=document.createElement("div");o.className="wc-block-components-text-input wc-block-components-address-form__number wc-better-billing-number";var a=document.createElement("input");a.type="text",a.id="billing-number",a.setAttribute("autocomplete","give-number"),a.setAttribute("aria-label","Número"),a.setAttribute("required",""),a.setAttribute("aria-invalid","false"),a.setAttribute("autocapitalize","sentences");var c="undefined"!=typeof WooBetterNumberData&&WooBetterNumberData.billing_number?WooBetterNumberData.billing_number:"";a.value=c,""!==c&&o.classList.add("is-active");var l=document.createElement("input");l.id="wc-billing-better-checkbox",l.className="wc-block-components-checkbox__input",l.type="checkbox",l.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.billing_number&&(l.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),a.addEventListener("input",function(){var e=a.value.trim();if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:"",woo_better_billing_number:e},n=document.getElementById("shipping-number");t.woo_better_shipping_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var s=document.createElement("label");s.setAttribute("for","billing-number"),s.textContent="Número",o.appendChild(a),o.appendChild(s);var d=document.createElement("div");d.className="wc-block-components-validation-error wc-better-billing",d.setAttribute("role","alert"),d.style.display="none";var u=document.createElement("p");u.id="validate-error-billing_number";var b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttribute("xmlns","http://www.w3.org/2000/svg"),b.setAttribute("viewBox","-2 -2 24 24"),b.setAttribute("width","24"),b.setAttribute("height","24"),b.setAttribute("aria-hidden","true"),b.setAttribute("focusable","false");var m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d","M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"),b.appendChild(m);var p=document.createElement("span");p.textContent="Por favor, insira um número válido.",u.appendChild(b),u.appendChild(p),d.appendChild(u),o.appendChild(d);var w=document.createElement("div");w.className="wc-block-components-checkbox wc-block-checkout__use-address-for-billing wc-better";var v=document.createElement("label");v.setAttribute("for","wc-billing-better-checkbox");var h=document.createElement("input");h.id="wc-billing-better-checkbox",h.className="wc-block-components-checkbox__input",h.type="checkbox",h.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.billing_number&&(h.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),h.addEventListener("change",function(){var e=this.checked?"S/N":"";if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:"",woo_better_billing_number:e},n=document.getElementById("shipping-number");t.woo_better_shipping_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("class","wc-block-components-checkbox__mark"),g.setAttribute("aria-hidden","true"),g.setAttribute("xmlns","http://www.w3.org/2000/svg"),g.setAttribute("viewBox","0 0 24 20");var _=document.createElementNS("http://www.w3.org/2000/svg","path");_.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),g.appendChild(_);var k=document.createElement("span");k.className="wc-block-components-checkbox__label",k.textContent="Sem número (S/N)",v.appendChild(h),v.appendChild(g),v.appendChild(k),w.appendChild(v),i.insertAdjacentElement("afterend",w),i.insertAdjacentElement("afterend",o),a.addEventListener("focus",function(){o.classList.add("is-active")}),a.addEventListener("blur",function(){a.value||o.classList.remove("is-active")});var f=document.getElementById("wc-billing-better-checkbox"),y=document.getElementById("billing-number");f.addEventListener("change",function(){var e=document.querySelector(".wc-better-billing-number"),t=document.querySelector(".wc-block-components-validation-error.wc-better-billing");this.checked?(y.disabled=!0,y.setAttribute("value","S/N"),y.value="S/N",y.style.backgroundColor="#e0e0e0",y.style.color="#808080",e&&e.classList.add("is-active"),t&&(t.style.display="none")):(y.disabled=!1,y.setAttribute("value",""),y.value="",y.style.backgroundColor="",y.style.color="",e&&e.classList.remove("is-active"))}),y.addEventListener("input",function(){var e=document.querySelector(".wc-block-components-validation-error.wc-better-billing");y&&(y.value.trim().length>0?e.style.display="none":e.style.display="block")})}}}function a(){if("undefined"!=typeof wp&&wp.data&&wp.data.dispatch)try{var e=wp.data.dispatch;if(e("wc/store/checkout")){var t=e("wc/store/checkout");if(t.setExtensionData){var n=document.getElementById("shipping-number"),r=document.getElementById("billing-number"),i={woo_better_shipping_number:n?n.value:"",woo_better_billing_number:r?r.value:""};t.setExtensionData("woo_better_number_validation",i)}}}catch(e){}}new MutationObserver(function(a){var c=document.querySelector("#shipping"),l=document.querySelector("#billing");if(c||(e=!1,i=0),l||(t=!1),c&&!e){e=!0;var s=setInterval(function(){if(i>20)clearInterval(s);else{var e=document.querySelector('span.wc-block-components-address-card__edit[aria-controls="shipping"]');if("true"!=e.getAttribute("aria-expanded")&&e.click(),"true"==e.getAttribute("aria-expanded")){clearInterval(s);var n=c.querySelector(".wc-block-components-text-input.wc-block-components-address-form__address_1");if(n){var r=document.createElement("div");r.className="wc-block-components-text-input wc-block-components-address-form__number wc-better-shipping-number";var a=document.createElement("input");a.type="text",a.id="shipping-number",a.setAttribute("autocomplete","give-number"),a.setAttribute("aria-label","Número"),a.setAttribute("required",""),a.setAttribute("aria-invalid","false"),a.setAttribute("autocapitalize","sentences");var l="undefined"!=typeof WooBetterNumberData&&WooBetterNumberData.shipping_number?WooBetterNumberData.shipping_number:"";a.value=l,""!==l&&r.classList.add("is-active");var d=document.createElement("input");d.id="wc-shipping-better-checkbox",d.className="wc-block-components-checkbox__input",d.type="checkbox",d.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.shipping_number&&(d.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),a.addEventListener("input",function(){var e=a.value.trim();if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:e,woo_better_billing_number:""},n=document.getElementById("billing-number");t.woo_better_billing_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var u=document.createElement("label");u.setAttribute("for","shipping-number"),u.textContent="Número",r.appendChild(a),r.appendChild(u);var b=document.createElement("div");b.className="wc-block-components-validation-error wc-better-shipping",b.setAttribute("role","alert"),b.style.display="none";var m=document.createElement("p");m.id="validate-error-shipping_number";var p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("xmlns","http://www.w3.org/2000/svg"),p.setAttribute("viewBox","-2 -2 24 24"),p.setAttribute("width","24"),p.setAttribute("height","24"),p.setAttribute("aria-hidden","true"),p.setAttribute("focusable","false");var w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d","M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"),p.appendChild(w);var v=document.createElement("span");v.textContent="Por favor, insira um número válido.",m.appendChild(p),m.appendChild(v),b.appendChild(m),r.appendChild(b);var h=document.createElement("div");h.className="wc-block-components-checkbox wc-block-checkout__use-address-for-shipping wc-better";var g=document.createElement("label");g.setAttribute("for","wc-shipping-better-checkbox");var _=document.createElement("input");_.id="wc-shipping-better-checkbox",_.className="wc-block-components-checkbox__input",_.type="checkbox",_.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.shipping_number&&(_.checked=!0,a.disabled=!0,a.style.backgroundColor="#e0e0e0",a.style.color="#808080"),_.addEventListener("change",function(){var e=this.checked?"S/N":"";if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:e,woo_better_billing_number:""},n=document.getElementById("billing-number");t.woo_better_billing_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttribute("class","wc-block-components-checkbox__mark"),k.setAttribute("aria-hidden","true"),k.setAttribute("xmlns","http://www.w3.org/2000/svg"),k.setAttribute("viewBox","0 0 24 20");var f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),k.appendChild(f);var y=document.createElement("span");y.className="wc-block-components-checkbox__label",y.textContent="Sem número (S/N)",g.appendChild(_),g.appendChild(k),g.appendChild(y),h.appendChild(g),n.insertAdjacentElement("afterend",h),n.insertAdjacentElement("afterend",r),a.addEventListener("focus",function(){r.classList.add("is-active")}),a.addEventListener("blur",function(){a.value||r.classList.remove("is-active")})}var E=document.querySelector(".wc-block-components-checkbox.wc-block-checkout__use-address-for-billing"),A=E?E.querySelector("input"):null;A&&A.addEventListener("change",function(){A.checked||(t=!1,o(document.querySelector("#billing")))})}i++}},5)}l&&!t&&o(l);var d=document.querySelector(".wc-block-checkout__actions_row");if(d&&(r=d.querySelector("button")),r&&!n){n=!0;var u="",b="",m=setInterval(function(){var e=document.getElementById("wc-shipping-better-checkbox");u=document.getElementById("shipping-number"),b=document.querySelector(".wc-block-components-validation-error.wc-better-shipping");var t=document.querySelector(".wc-better-shipping-number");e&&(clearInterval(m),e.addEventListener("change",function(){this.checked?(u.disabled=!0,u.setAttribute("value","S/N"),u.value="S/N",u.style.backgroundColor="#e0e0e0",u.style.color="#808080",t&&t.classList.add("is-active"),b&&(b.style.display="none")):(u.disabled=!1,u.setAttribute("value",""),u.value="",u.style.backgroundColor="",u.style.color="",t&&t.classList.remove("is-active"))}),u&&b&&u.addEventListener("input",function(){u.value.trim().length>0?b.style.display="none":b.style.display="block"}))},10);r&&r.addEventListener("click",function(e){var t=document.getElementById("shipping-number"),n=document.getElementById("billing-number"),r=document.querySelector(".wc-block-components-validation-error.wc-better-shipping"),i=document.querySelector(".wc-block-components-validation-error.wc-better-billing");t&&!t.value.trim().length?(e.stopPropagation(),e.preventDefault(),r.style.display="block",t.scrollIntoView({behavior:"smooth",block:"center"})):n&&!n.value.trim().length&&(e.stopPropagation(),e.preventDefault(),i.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}))})}}).observe(document.body,{childList:!0,subtree:!0}),function(){if("undefined"!=typeof wp&&wp.data&&wp.data.dispatch)try{var e=wp.data,t=e.dispatch,n=e.select;if(t("wc/store/checkout")){var r=t("wc/store/checkout");if(r.setExtensionData){var i=(n("wc/store/checkout").getExtensionData()||{}).woo_better_number_validation||{};i.hasOwnProperty("woo_better_shipping_number")||(i.woo_better_shipping_number=""),i.hasOwnProperty("woo_better_billing_number")||(i.woo_better_billing_number=""),r.setExtensionData("woo_better_number_validation",i)}}}catch(e){}}(),new MutationObserver(function(e){var t=!1;e.forEach(function(e){"childList"===e.type&&e.addedNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&((e.querySelectorAll?e.querySelectorAll("#shipping-number, #billing-number"):[]).length>0||e.id&&("shipping-number"===e.id||"billing-number"===e.id))&&(t=!0)})}),t&&setTimeout(function(){a();var e=document.getElementById("shipping-number"),t=document.getElementById("billing-number");e&&!e.dataset.storeApiListener&&(e.addEventListener("input",a),e.addEventListener("change",a),e.dataset.storeApiListener="true"),t&&!t.dataset.storeApiListener&&(t.addEventListener("input",a),t.addEventListener("change",a),t.dataset.storeApiListener="true")},100)}).observe(document.body,{childList:!0,subtree:!0}),setTimeout(function(){a();var e=document.getElementById("shipping-number"),t=document.getElementById("billing-number");e&&!e.dataset.storeApiListener&&(e.addEventListener("input",a),e.addEventListener("change",a),e.dataset.storeApiListener="true"),t&&!t.dataset.storeApiListener&&(t.addEventListener("input",a),t.addEventListener("change",a),t.dataset.storeApiListener="true")},500)});