document.addEventListener("DOMContentLoaded",function(){var e=!1,t=!1,n=!1,o=null,r=0;function i(e){var n=document.querySelector('span.wc-block-components-address-card__edit[aria-controls="billing"]'),o=document.getElementById("billing-number");if("true"!=n.getAttribute("aria-expanded")&&n.click(),"true"==n.getAttribute("aria-expanded")&&!o){var r=e.querySelector(".wc-block-components-text-input.wc-block-components-address-form__address_1");if(t=!0,r){var i=document.createElement("div");i.className="wc-block-components-text-input wc-block-components-address-form__number wc-better-billing-number";var c=document.createElement("input");c.type="text",c.id="billing-number",c.setAttribute("autocomplete","give-number"),c.setAttribute("aria-label","Número"),c.setAttribute("required",""),c.setAttribute("aria-invalid","false"),c.setAttribute("autocapitalize","sentences"),c.value="undefined"!=typeof WooBetterNumberData&&WooBetterNumberData.billing_number?WooBetterNumberData.billing_number:"";var a=document.createElement("input");a.id="wc-billing-better-checkbox",a.className="wc-block-components-checkbox__input",a.type="checkbox",a.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.billing_number&&(a.checked=!0,c.disabled=!0,c.style.backgroundColor="#e0e0e0",c.style.color="#808080",i.classList.add("is-active")),c.addEventListener("input",function(){var e=c.value.trim();if(console.log(e),window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:"",woo_better_billing_number:e},n=document.getElementById("shipping-number");console.log(n),t.woo_better_shipping_number=n?n.value:e,console.log(t),window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var l=document.createElement("label");l.setAttribute("for","billing-number"),l.textContent="Número",i.appendChild(c),i.appendChild(l);var s=document.createElement("div");s.className="wc-block-components-validation-error wc-better-billing",s.setAttribute("role","alert"),s.style.display="none";var d=document.createElement("p");d.id="validate-error-billing_number";var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("xmlns","http://www.w3.org/2000/svg"),u.setAttribute("viewBox","-2 -2 24 24"),u.setAttribute("width","24"),u.setAttribute("height","24"),u.setAttribute("aria-hidden","true"),u.setAttribute("focusable","false");var b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d","M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"),u.appendChild(b);var m=document.createElement("span");m.textContent="Por favor, insira um número válido.",d.appendChild(u),d.appendChild(m),s.appendChild(d),i.appendChild(s);var p=document.createElement("div");p.className="wc-block-components-checkbox wc-block-checkout__use-address-for-billing wc-better";var w=document.createElement("label");w.setAttribute("for","wc-billing-better-checkbox");var v=document.createElement("input");v.id="wc-billing-better-checkbox",v.className="wc-block-components-checkbox__input",v.type="checkbox",v.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.billing_number&&(v.checked=!0,c.disabled=!0,c.style.backgroundColor="#e0e0e0",c.style.color="#808080"),v.addEventListener("change",function(){var e=this.checked?"S/N":"";if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:"",woo_better_billing_number:e},n=document.getElementById("shipping-number");console.log(n),t.woo_better_shipping_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("class","wc-block-components-checkbox__mark"),h.setAttribute("aria-hidden","true"),h.setAttribute("xmlns","http://www.w3.org/2000/svg"),h.setAttribute("viewBox","0 0 24 20");var g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),h.appendChild(g);var k=document.createElement("span");k.className="wc-block-components-checkbox__label",k.textContent="Sem número (S/N)",w.appendChild(v),w.appendChild(h),w.appendChild(k),p.appendChild(w),r.insertAdjacentElement("afterend",p),r.insertAdjacentElement("afterend",i),c.addEventListener("focus",function(){i.classList.add("is-active")}),c.addEventListener("blur",function(){c.value||i.classList.remove("is-active")});var _=document.getElementById("wc-billing-better-checkbox"),y=document.getElementById("billing-number");_.addEventListener("change",function(){var e=document.querySelector(".wc-better-billing-number"),t=document.querySelector(".wc-block-components-validation-error.wc-better-billing");this.checked?(y.disabled=!0,y.setAttribute("value","S/N"),y.value="S/N",y.style.backgroundColor="#e0e0e0",y.style.color="#808080",e&&e.classList.add("is-active"),t&&(t.style.display="none")):(y.disabled=!1,y.setAttribute("value",""),y.value="",y.style.backgroundColor="",y.style.color="",e&&e.classList.remove("is-active"))}),y.addEventListener("input",function(){var e=document.querySelector(".wc-block-components-validation-error.wc-better-billing");y&&(y.value.trim().length>0?e.style.display="none":e.style.display="block")})}}}new MutationObserver(function(c){var a=document.querySelector("#shipping"),l=document.querySelector("#billing");if(a||(e=!1,r=0),l||(t=!1),a&&!e){e=!0;var s=setInterval(function(){if(r>20)clearInterval(s);else{var e=document.querySelector('span.wc-block-components-address-card__edit[aria-controls="shipping"]');if("true"!=e.getAttribute("aria-expanded")&&e.click(),"true"==e.getAttribute("aria-expanded")){clearInterval(s);var n=a.querySelector(".wc-block-components-text-input.wc-block-components-address-form__address_1");if(n){var o=document.createElement("div");o.className="wc-block-components-text-input wc-block-components-address-form__number wc-better-shipping-number";var c=document.createElement("input");c.type="text",c.id="shipping-number",c.setAttribute("autocomplete","give-number"),c.setAttribute("aria-label","Número"),c.setAttribute("required",""),c.setAttribute("aria-invalid","false"),c.setAttribute("autocapitalize","sentences"),c.value="undefined"!=typeof WooBetterNumberData&&WooBetterNumberData.shipping_number?WooBetterNumberData.shipping_number:"";var l=document.createElement("input");l.id="wc-shipping-better-checkbox",l.className="wc-block-components-checkbox__input",l.type="checkbox",l.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.shipping_number&&(l.checked=!0,c.disabled=!0,c.style.backgroundColor="#e0e0e0",c.style.color="#808080",o.classList.add("is-active")),c.addEventListener("input",function(){var e=c.value.trim();if(console.log(e),window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:e,woo_better_billing_number:""},n=document.getElementById("billing-number");t.woo_better_billing_number=n?n.value:e,console.log(t),window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var d=document.createElement("label");d.setAttribute("for","shipping-number"),d.textContent="Número",o.appendChild(c),o.appendChild(d);var u=document.createElement("div");u.className="wc-block-components-validation-error wc-better-shipping",u.setAttribute("role","alert"),u.style.display="none";var b=document.createElement("p");b.id="validate-error-shipping_number";var m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("xmlns","http://www.w3.org/2000/svg"),m.setAttribute("viewBox","-2 -2 24 24"),m.setAttribute("width","24"),m.setAttribute("height","24"),m.setAttribute("aria-hidden","true"),m.setAttribute("focusable","false");var p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"),m.appendChild(p);var w=document.createElement("span");w.textContent="Por favor, insira um número válido.",b.appendChild(m),b.appendChild(w),u.appendChild(b),o.appendChild(u);var v=document.createElement("div");v.className="wc-block-components-checkbox wc-block-checkout__use-address-for-shipping wc-better";var h=document.createElement("label");h.setAttribute("for","wc-shipping-better-checkbox");var g=document.createElement("input");g.id="wc-shipping-better-checkbox",g.className="wc-block-components-checkbox__input",g.type="checkbox",g.setAttribute("aria-invalid","false"),"undefined"!=typeof WooBetterNumberData&&"S/N"===WooBetterNumberData.shipping_number&&(g.checked=!0,c.disabled=!0,c.style.backgroundColor="#e0e0e0",c.style.color="#808080"),g.addEventListener("change",function(){var e=this.checked?"S/N":"";if(window.wc&&window.wc.blocksCheckout&&"function"==typeof window.wc.blocksCheckout.extensionCartUpdate){var t={woo_better_shipping_number:e,woo_better_billing_number:""},n=document.getElementById("billing-number");t.woo_better_billing_number=n?n.value:e,window.wc.blocksCheckout.extensionCartUpdate({namespace:"woo_better_number_validation",data:t})}});var k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttribute("class","wc-block-components-checkbox__mark"),k.setAttribute("aria-hidden","true"),k.setAttribute("xmlns","http://www.w3.org/2000/svg"),k.setAttribute("viewBox","0 0 24 20");var _=document.createElementNS("http://www.w3.org/2000/svg","path");_.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),k.appendChild(_);var y=document.createElement("span");y.className="wc-block-components-checkbox__label",y.textContent="Sem número (S/N)",h.appendChild(g),h.appendChild(k),h.appendChild(y),v.appendChild(h),n.insertAdjacentElement("afterend",v),n.insertAdjacentElement("afterend",o),c.addEventListener("focus",function(){o.classList.add("is-active")}),c.addEventListener("blur",function(){c.value||o.classList.remove("is-active")})}var f=document.querySelector(".wc-block-components-checkbox.wc-block-checkout__use-address-for-billing"),E=f?f.querySelector("input"):null;E&&E.addEventListener("change",function(){E.checked||(t=!1,i(document.querySelector("#billing")))})}r++}},5)}l&&!t&&i(l);var d=document.querySelector(".wc-block-checkout__actions_row");if(d&&(o=d.querySelector("button")),o&&!n){n=!0;var u="",b="",m=setInterval(function(){var e=document.getElementById("wc-shipping-better-checkbox");u=document.getElementById("shipping-number"),b=document.querySelector(".wc-block-components-validation-error.wc-better-shipping");var t=document.querySelector(".wc-better-shipping-number");e&&(clearInterval(m),e.addEventListener("change",function(){this.checked?(u.disabled=!0,u.setAttribute("value","S/N"),u.value="S/N",u.style.backgroundColor="#e0e0e0",u.style.color="#808080",t&&t.classList.add("is-active"),b&&(b.style.display="none")):(u.disabled=!1,u.setAttribute("value",""),u.value="",u.style.backgroundColor="",u.style.color="",t&&t.classList.remove("is-active"))}),u&&b&&u.addEventListener("input",function(){u.value.trim().length>0?b.style.display="none":b.style.display="block"}))},10);o&&o.addEventListener("click",function(e){var t=document.getElementById("shipping-number"),n=document.getElementById("billing-number"),o=document.querySelector(".wc-block-components-validation-error.wc-better-shipping"),r=document.querySelector(".wc-block-components-validation-error.wc-better-billing");t&&!t.value.trim().length?(e.stopPropagation(),e.preventDefault(),o.style.display="block",t.scrollIntoView({behavior:"smooth",block:"center"})):n&&!n.value.trim().length&&(e.stopPropagation(),e.preventDefault(),r.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}))})}}).observe(document.body,{childList:!0,subtree:!0})});